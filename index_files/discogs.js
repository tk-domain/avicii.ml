webpackJsonp([77],{0:function(e,t,n){var r,o,i,a,s,l,c;n(403),n(856),n(857),s=n(25),i=n(7),n(9),n(12),n(407),n(368),n(13),n(6),n(5),n(858),n(318),n(361),n(860),n(861),n(400),n(375),n(862),n(315),n(863),n(864),n(865),n(866),n(867),n(380),n(413),n(868),n(869),n(870),n(448),n(447),n(808),n(871),n(872),n(304),n(403),n(372),n(873),n(14),n(874),n(373),n(222),n(225),n(875),n(876),n(381),n(320),n(788),n(819),n(13),n(877),n(878),n(879),n(880),n(881),n(882),n(883),n(813),n(884),n(369),n(885),n(364),n(886),n(888),n(889),n(820),n(890),n(321),n(405),n(366),n(891),n(892),n(371),n(376),n(893),n(374),n(894),n(393),l=n(305),r=n(11),o=n(421),a=n(306),c=n(3).noop,ds.define("app",function(e){var t,n,u;return u=e("$","ready"),t=u.$,n=u.ready,e("Backbone").$=t,e("logError"),n(function(){var u,d,f;return f=e("util"),a.init().then(function(){var e,t;return e=i.ga_pageview_page,t=i.ga_pageview_title,a.legacyTrackPageView(e,t)}).catch(c),o.init(),t("input, textarea").placeholder(),e.apply(null,["templates","alerts","layout","confirm","onNextVisit","images","inputCounter","notes","tables","tooltip","youtubemodal","rollover","appNexus"]),1===i.interactiveAdmin&&e("interactiveadmin"),i.username||e("historyListener"),u=s.getTranslations(),f.processQueue(ds.q||(ds.q=[])),d=function(){return l.__resolveInit(ds)},n(function(){return u.then(d,d)}),r.resolve(ds)})})},5:function(e,t,n){var r,o,i,a,s,l,c,u,d,f,h,p,g,m,v,y,b;r=n(2),s=n(3),c=n(6),f=n(7),d=n(8),h=n(9),o=n(11),g=n(12).hasHistoryAPI,v=n(25),b={},b.processQueue=function(e){var t,n,r,o;for(e.push===Array.prototype.push&&(e.push=function(e,t){return function(){var n;return n=t.apply(e,arguments),s.defer(b.processQueue,e),n}}(e,Array.prototype.push)),t=s.pluck(e,0),r=0,o=t.length;r<o;r++)n=t[r],n.call(window,ds.require);e.length=0},b.inUrl=function(e){return e.length>0&&s(window.location.href).includeString(e)},b.inPath=function(e){return e.length>0&&s(window.location.pathname).includeString(e)},b.matchesSegments=function(e){var t,n;if("object"!=typeof e)return!1;for(t in e)if(e.hasOwnProperty(t)&&(!s.isString(t)||!s.isString(e[t])))return!1;if(e[0]&&!s(window.location.hostname).includeString(e[0]))return!1;n=window.location.pathname.substring(1).split("/"),n.unshift(window.location.hostname);for(t in e)if(e.hasOwnProperty(t)&&n[t]!==e[t])return!1;return!0},b.redirect=function(e){return window.location.href=e,!1},b.requireLogin=function(){var e,t,n,r;return r=f.loginUrl,e=encodeURIComponent(location.pathname),t=encodeURIComponent(location.hash),n=f.loggedIn,n||b.redirect(r+"?nologin=1&return="+e+t),n},b.requireActivation=function(){var e,t;return e=f.userActivated,t=f.activationHelpUrl,e||b.redirect(t),e},b.getElementMetrics=function(e,t){var n,r;if(!(e.length<1))return n={},r=t?e.position():e.offset(),n.height=e.outerHeight(!1),n.width=e.outerWidth(!1),n.area=n.height*n.width,r&&(n.top=r.top,n.left=r.left,n.bottom=n.top+n.height,n.right=n.left+n.width),n},b.selectText=function(){var e,t;document.selection?(document.selection.empty(),e=document.body.createTextRange(),e.moveToElementText(this),e.select()):window.getSelection&&(t=window.getSelection(),e=document.createRange(),e.selectNode(this),t.removeAllRanges(),t.addRange(e))},b.toString=function(e){return(" "+e).substring(1)},b.scrollTo=function(e,t){var n,o,i;if(n=s.isString(e)?r("#"+e):e,!n.length&&(n=r("[name='"+e+"']"),!n.length))return!1;if(s.isNumber(n))i=n;else{if(o=n.offset(),!o)return!1;i=o.top,t&&(i-=window.innerHeight-n.height())}return!s.isUndefined(i)&&(r("html, body").animate({scrollTop:i},300),!0)},b.disableFieldButSendData=function(){var e,t,n;n=r(this),e=n.clone(),t=n.next(),e.attr({id:"",name:"",disabled:"disabled"}),t.length>0?t.before(e):n.parent().append(e),n.hide()},b.errorMessageFromXHR=function(e){var t;return"application/json"===e.getResponseHeader("content-type")&&(t=r.parseJSON(e.responseText),t.message)?t.message:v.getText("An unknown error occurred (code %(status)s)")({status:e.status})},u={title:v.getText("Confirm"),okayButtonText:v.getText("Okay"),cancelButtonText:v.getText("Cancel")},b.confirm=function(e,t){var n,r,i,a,l,c,d,f,p,g,m,y;return null==t&&(t={}),d=ds.require("reactDialogs").makeReactDialog,m=s.extend({},u,t),n=m.accept,i=m.decline,y=m.title,g=m.okayButtonText,r=m.cancelButtonText,f=void 0,p=!1,"function"==typeof y&&(y=y()),"function"==typeof g&&(g=g()),"function"==typeof r&&(r=r()),l=function(e){return p=e,a.then(function(){return h.trigger(f.CLOSE)})},a=d({title:y,content:e||v.getText("Are you sure?")(),buttons:[{text:g,color:"green",className:"dialog-button-okay",click:s.partial(l,!0)},{text:r,className:"dialog-button-cancel",click:s.partial(l,!1)}]}),c=function(){return new o(function(e,t){var r;return r=function(){return h.off(f.REMOVE,r),p?(n&&n(),e()):(i&&i(),t())},h.on(f.REMOVE,r)})},a.then(function(){return f=ds.require("modalEvents"),c()})},b.registerDelegate=function(e,t){var n,o;if(s.isString(e)&&(e=r(e)),!e.length)return!1;for(n in t)if(t.hasOwnProperty(n))for(o in t[n])t[n].hasOwnProperty(o)&&e.on(n,o,t[n][o]);return!0},m=/#.+$/g,b.updateParams=function(e,t){var n,o,i,a,l,c;if(t&&(t.add||t.remove)){if(c=e.split("?"),n=e.match(m),n&&(c[0]=c[0].replace(m,"")),l=c[1]?d(c[1]):{},t.add)for(i in t.add)s.has(t.add,i)&&t.add[i]&&(l[i]=t.add[i]);for(s.isArray(t.remove)||(t.remove=[t.remove]),o=0,a=t.remove.length;o<a;)delete l[t.remove[o]],o++;e=(c[0]+"?"+r.param(l)).replace(/\?$/,""),n&&(e+=n[0])}return e},b.isFocused=function(){return r(document.activeElement).is("input, select, textarea")},b.hasSelectedText=function(){var e;return e=window.getSelection().toString(),e.split(" ").length>1},b.getDuration=function(e){return null==e&&(e=c),Math.round((new Date-e)/1e3)},b.bytesToHumanReadable=function(e){var t,n,r;return t=e/1e3,r="",t>=1e3?(n=t/1e3,r=n.toFixed(1)+"MB"):r=Math.round(t)+"KB",r},b.getImagesHost=function(){var e;return e=f.imagesHost.replace(/^http:\/\//,"//"),s(e).endsWith("/")&&(e=e.slice(0,-1)),e},b.getDefaultImage=function(e,t){var n;return null==e&&(e="release"),n=b.getImagesHost(),t=Boolean(t)?"-"+t:"",n+"/images/default-"+e+t+".png"},b.getDefaultReleaseImage=function(e){var t;return t={CD:"cd",CDr:"cd","CD-ROM":"cd",DVD:"cd",DVDr:"cd",Cassette:"cassette",File:"digital",Vinyl:""},e=t[e],b.getDefaultImage("release",e)},b.deparam=function(e){return d(e||window.location.search.replace("?",""))},i=13,a=32,b.makeOnNextVisitHandler=function(e,t,n){return function(r){var o,s;if(s="mousedown"===r.type||"keydown"===r.type&&(r.which===i||r.which===a))return(o=b.makeOnNextVisitHandler.onNextVisit||ds.require("onNextVisit"))(e,t,n,void 0,b.getDuration())}},b.convertCurrency=function(e,t,n){var r;return r=f["m:currencyRates"],e*r[t]/r[n]},b.timeoutPromise=function(e,t,n){return new o(function(r,o){return s.delay(o,t,n),e.then(r,o)})},l=window.requestAnimationFrame||setTimeout,b.raf=function(e){return l(e,1e3/60)},b.centerOn=function(e){var t,n,o,i,a,s;return t=r(window),o=e.height(),i=e.offset().top,a=t.height(),n=(a-o)/2,s=i-n,b.raf(function(){return t.scrollTop(s)})},y={timeout:1e4,interval:2e3,maxInterval:15e3,decay:1.25,delay:0,decayDelay:3e4,now:s.now},b.poll=function(e,t){var n,r,i,a,l,c,u,d,f,h;return null==t&&(t={}),u=s.defaults(t,y),f=u.timeout,a=u.interval,l=u.maxInterval,n=u.decay,i=u.delay,r=u.decayDelay,c=u.now,d=c(),h=function(){return c()-d},new o(function(t,o){var s,c,u,d,p;if(c=null,p=function(){if(a=a>=l?l:h()>=r?a*n:a,clearTimeout(c),h()<f||!f)return c=setTimeout(u,a)},d=function(e){return t(e),clearTimeout(c)},u=function(){return e().then(d,p)},s=function(){return clearTimeout(c),o("Polling failed after "+f+"ms")},setTimeout(u,i),f)return setTimeout(s,f)})},p={params:null},b.getUrl=function(e,t){var n;return null==t&&(t=p),t!==p&&(t=s.defaults(t,p)),n=t.params,n&&(e=b.updateParams(e,{add:n})),f.locale!==f.defaultLocale&&e.split("/")[1]!==f.locale&&(e="/"+f.locale+e),e},b.historyPushUrl=function(e,t){var n;if(g)return n=b.getUrl(e,t),window.history.pushState(null,null,n),(null!=t?t.title:void 0)?document.title=t.title:void 0},b.classSet=function(e){var t;return t="",s.map(e,function(e,n){if(e)return t+=n+" "}),t},b.isElementInViewport=function(e){var t,n;return!!(e=r(e).get(0))&&(n=e.getBoundingClientRect(),t=n.top>=0&&n.left>=0&&n.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&n.right<=(window.innerWidth||document.documentElement.clientWidth))},e.exports=b},6:function(e,t){var n;n=new Date,e.exports=n},8:function(e,t){e.exports=function(e,t){var n={},r={true:!0,false:!1,null:null};return e.replace(/\+/g," ").split("&").forEach(function(e,o){var i,a=e.split("="),s=decodeURIComponent(a[0]),l=n,c=0,u=s.split("]["),d=u.length-1;if(/\[/.test(u[0])&&/\]$/.test(u[d])?(u[d]=u[d].replace(/\]$/,""),u=u.shift().split("[").concat(u),d=u.length-1):d=0,2===a.length)if(i=decodeURIComponent(a[1]),t&&(i=i&&!isNaN(i)?+i:"undefined"===i?void 0:void 0!==r[i]?r[i]:i),d)for(;c<=d;c++)s=""===u[c]?l.length:u[c],l=l[s]=c<d?l[s]||(u[c+1]&&isNaN(u[c+1])?{}:[]):i;else"array"==typeof n[s]?n[s].push(i):void 0!==n[s]?n[s]=[n[s],i]:n[s]=i;else s&&(n[s]=t?void 0:"")}),n}},9:function(e,t,n){var r,o,i;o=n(3),r=n(10),i=o.extend({},r.Events),e.exports=i},12:function(e,t,n){var r,o,i,a,s,l,c,u,d,f,h;r=n(2),o=n(3),l=n(7),n(13),u=ds.require("ready"),h=function(e,t){var n;return n=void 0,function(){return o.isUndefined(n)&&(n=t(),f(d(n,e))),n}},s={},a=function(){var e;return e={hasTouch:"ontouchstart"in window,inDevMode:l.assetBasePath.match("dev"),isMobile:r("html").hasClass("is_mobile"),hasFormData:!o.isUndefined(window.FormData),hasHistoryAPI:!(!window.history||"undefined"==typeof history||!history.pushState),hasFlexBox:void 0!==document.createElement("p").style.flex,hasGetBoundingClientRect:function(){var e;return e=document.createElement("p"),document.body.insertBefore(e,null),s="undefined"!=typeof e.getBoundingClientRect,document.body.removeChild(e),s},has3d:function(){var e,t,n,r;e=document.createElement("p"),r={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"},document.body.insertBefore(e,null);for(n in r)o.isUndefined(e.style[n])||(e.style[n]="translate3d(1px,1px,1px)",t=window.getComputedStyle(e,null).getPropertyValue(r[n]));return document.body.removeChild(e),(null!=t?t.length:void 0)>0&&"none"!==t},hasLocalStorage:function(){try{return window.localStorage.setItem("discogsls","discogsls"),window.localStorage.removeItem("discogsls"),!0}catch(e){return!1}}},o.each(e,function(e,t){return o.isFunction(e)?s[t]=h(t,e):s[t]=e}),s},f=function(e){return r("html").addClass(e)},i=function(){var e,t,n;n=o.functions(s),n.push("initialized","init"),e=o.omit(s,n),t=o.map(e,d),f(t.join(" "))},d=function(e,t){var n;return n=e?"":"no_",n+t.toLowerCase()},c={},o.extend(c,a()),u(i),e.exports=c},13:function(e,t,n){var r,o,i,a,s,l,c;r=n(2),o=n(11),i=n(3),n(14),l=ds.require("logError"),a=new o(function(e){return"interactive"===document.readyState||"completed"===document.readyState?e(document):r(function(){return e(document)})}),s=function(e){return e instanceof Error&&l(e),o.reject(e)},c=function(e){return null==e&&(e=i.noop),c.__calls+=1,a.then(e).catch(s)},c.__calls=0,ds.define("ready",function(){return c}),e.exports=c},25:function(e,t,n){var r,o,i,a,s,l,c,u,d,f,h,p,g,m;a=n(7),o=n(3),r=n(11),n(14),u=ds.require("logError"),i=void 0,c="translate() type error: expected string",h={},h.templates=g={},p={evaluate:/\%\(([\s\S]+?)\)s/g,interpolate:/\%\(([\s\S]+?)\)s/g},i=a.defaultLocale,h.locale=a.locale||i,g[i]={},l={},d=function(e){var t;return t={},o.each(e,function(e,n){var r,i;if(e=e.toString())return i=t[n]||(t[n]=o.template(e,p)),(r=g[h.locale])[n]||(r[n]=i)}),t},s=function(e){var t;return g[h.locale][e]||(t=g[i])[e]||(t[e]=o.template(e,p))},f=function(e){if("string"!=typeof e)throw c;return l[e]||(l[e]=function(t){return s(e)(t)})},m=function(e,t){var n,r,o,i,a;return g[i=h.locale]||(g[i]={}),r=f(e),e&&t?(n=f(t),(o=g[h.locale])[a=e+t]||(o[a]=function(e,t){var o;return t||(t=e),o=e>1||0===parseInt(e),o?n(t):r(t)})):r},h.ngetText=function(e,t){return m(e,t)},h.getText=function(e){return m(e)},h.fetchTranslations=function(e){return new r(function(t,r){var o;try{return n(26)("./"+e).then(t,r)}catch(t){return o=new Error("Missing locale module: "+e),u(o),r(o)}})},h.getTranslations=function(e,t){return null==e&&(e=h.locale),g[e]||(g[e]={}),new r(function(n,r){return t?(h.locale=e,n(d(t))):e===i?n(g[i]):h.fetchTranslations(e).then(function(e){return n(d(e))},function(){return r("Failed to load translations")})}).catch(function(e){return u(e),r.reject()})},e.exports=h},26:function(e,t,n){function r(e){return n(o(e))}function o(e){return i[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var i={"./de":27,"./de.coffee":27,"./es":29,"./es.coffee":29,"./fr":31,"./fr.coffee":31,"./it":33,"./it.coffee":33,"./ja":35,"./ja.coffee":35};r.keys=function(){return Object.keys(i)},r.resolve=o,e.exports=r,r.id=26},27:function(e,t,n){e.exports=new Promise(function(e){return n.e(1,function(t){return e(n(28))})})},29:function(e,t,n){e.exports=new Promise(function(e){return n.e(2,function(t){return e(n(30))})})},31:function(e,t,n){e.exports=new Promise(function(e){return n.e(3,function(t){return e(n(32))})})},33:function(e,t,n){e.exports=new Promise(function(e){return n.e(4,function(t){return e(n(34))})})},35:function(e,t,n){e.exports=new Promise(function(e){return n.e(5,function(t){return e(n(36))})})},37:function(e,t,n){var r,o,i;r=n(11),i=function(){return new r(function(e){return n.e(6,function(t){return e(n(214))})})},o=function(){return ds.require("load")("react-bundle").then(function(){return{React:n(38),ReactDOM:n(190),PureRenderMixin:n(191),Immutable:n(194),Redux:n(195)}})},e.exports={loadReactComponents:i,loadReactChunk:o}},222:function(e,t,n){var r,o,i,a;r=n(2),a={},a.currentName=void 0,o={},i={},a.setup=function(e,t){return a.currentName=e,o[e]=t},a.load=function(e){return a.currentName=e,i[e]||(i[e]=r.ajax(window.location.pathname+"/page_config")),i[e].then(function(e){return o[a.currentName]=e}),i[e]},a.get=function(e){if(o[a.currentName])return o[a.currentName][e];throw new Error("Trying to access '"+e+"' on page config '"+a.currentName+"' that is not loaded yet.")},e.exports=a},225:function(e,t){e.exports={ROUTE_UPDATED:"page:routeUpdated",PAGE_UPDATED:"page:updated",PAGE_LOADING:"page:loading",PAGE_LOADING_FINISHED:"page:loadingFinished",PAGE_UPDATE_FAILED:"page:updateFailed",PAGE_MESSAGE:"page:message",REMOVE_PAGE_MESSAGE:"page:removeMessage",PAGE_NOT_FOUND:"page:notFound",PAGE_LOADER_MOUNTED:"pageLoader:mounted",PAGE_LOADER_UNMOUNTED:"pageLoader:unmounted",PAGE_LOADER_LOADED:"pageLoader:loaded"}},298:function(e,t,n){var r,o,i,a,s,l,c;r=n(2),a=n(3),i=n(10),s={},s=a.extend(s,i.Events),l=function(e,t){var n;null==t&&(t=".action_menu_toggler"),n=r(e),n=n||r(document.body),c(n),n.find(t).each(function(e,t){var n;return n=r(t),new o({el:n.next(".action_menu"),$toggleEl:n})}),r(document).one("pjax:end",function(){return l(n,t)})},c=function(e){var t,n,r;n=s._events&&s._events["action_menu:visible"],n&&(r=a.pluck(n,"context"),t=a.filter(r,function(t){var n;return n=t.$el.closest(e).length>0}),a.invoke(t,"teardown"))},o=i.View.extend({events:{"click a":"hideMenu"},initialize:function(e){var t;this.listenTo(s,"action_menu:visible",function(e){e!==this&&this.$el.hasClass("action_menu_visible")&&this.hideMenu()},this),this.boundToggleMenu=a.bind(this.toggleMenu,this),this.$toggleEl=e.$toggleEl,this.$toggleEl.onFastClick(this.boundToggleMenu),this.delegateEvents(),t=a.bind(function(e){this.$el.closest(e.target).length>0&&(this.teardown(),r(document).off("pjax:start",t))},this),r(document).on("pjax:start",t)},renderMenu:function(e){var t;this.$el.toggleClass("action_menu_visible",e),this.$toggleEl.toggleClass("action_menu_toggler_visible",e),this.boundHideMenu=this.boundHideMenu||a.bind(this.hideMenu,this),r("body").off("click",this.boundHideMenu),e&&(t=this.$el.find("li:visible a, li:visible button").first(),this.boundFocusHandler=void 0,a.delay(function(e){r("body").on("click",e.boundHideMenu)},400,this),this.boundFocusHandler||(this.boundFocusHandler=this.$el.on("mouseenter",this.removeFocus)),this.boundToggleArrowHighlight||(this.boundToggleArrowHighlight=a.bind(this.toggleArrowHighlight,this),t.on("mouseenter blur focus mouseleave",this.boundToggleArrowHighlight)),t.trigger("focus"),s.trigger("action_menu:visible",this))},teardown:function(){this.stopListening(),this.undelegateEvents(),this.$toggleEl.offFastClick(this.boundToggleMenu)},toggleArrowHighlight:function(e){var t,n;n="mouseenter"===(t=null!=e?e.type:void 0)||"focus"===t,this.$el.toggleClass("ui-dialog-arrow-highlight",n)},removeFocus:function(){var e;return null!=(e=document.activeElement)?e.blur():void 0},hideMenu:function(){this.renderMenu(!1)},toggleMenu:function(e){var t;t=this.$el.hasClass("action_menu_visible"),this.renderMenu(!t),e.preventDefault(),e.stopPropagation()}}),s.teardown=c,s.ActionMenuView=o,s.setupActionMenuView=l,e.exports=s},304:function(e,t,n){var r,o,i,a,s,l;r=n(2),o=n(3),i=n(7),l=n(305),s=n(306),a=n(12),n(319),n(320),n(13),ds.define("layout",function(e){var t,n,c,u,d;return t=e("Breakpoints"),c=e("persist"),d=e("ready"),n=[{name:"mobile",value:600},{name:"desktop",value:800}],u={init:function(){return this.breakpoints=new t(n),l.then(function(){a.isMobile&&r(window).scrollTop()<=100&&scrollTo(0,0)}),this.breakpoints.measure(),r("#layout_buttons").on("click","a",this.changeLayout),r("#mobile_layout, #mobile_layout_top").on("click",this.changeMobileLayout),r("#footer_menu_link").onFastClick(this.toggleFooterMenu),r(".sticky_aside").stickyAside(14),r(document).on("pjax:end",u.setupBinding.bind(this)),!i.loggedIn&&c.get("search_layout")&&c.unset("search_layout"),this.setupBinding(),u},setupBinding:function(){var e,t;r("#layout_buttons a").click(u.savePageLayout),"mobile"===u.mode()&&(t=r(".open_filter"),t.length&&a.has3d(),t.onFastClick(function(e){var t,n,o;o=e||window.event,t=r(".aside_nav_wrap"),n=t.length>0?t:r("#page"),r(this).toggleClass("filters_active"),s.legacyTrack("mobile","aside_toggle"),u.toggleElement(o,n,function(e){var t;return t=r(e.target),0===t.parents("#page_aside").length&&!t.closest(".off_canvas_nav").length})}),r("#tab_selection").onFastClick(function(e){var t,n;n=e||window.event,t=r(".tab_menu, .side_menu"),s.legacyTrack("mobile","tabs_toggle"),u.toggleElement(n,t,function(e){return 0===r(e.target).parents(".tab_menu, side_menu").length})}),e=r(".side_menu, .tab_menu"),e.length>0&&(e.css("width",e[0].scrollWidth),this.scrollActiveTab(e)))},scrollActiveTab:function(e){var t,n,o;if(t=e.find(".current")[0])return n=t.offsetLeft+t.clientWidth,o=r(document).width(),n>o?r(".responsive_wrap").scrollLeft(n-.6*o):void 0},changeLayout:function(){var e,t;return e=this,t=function(){e===this?r(this).attr("disabled","disabled"):r(this).removeAttr("disabled")},o.defer(function(){r("#layout_buttons a").each(t)}),!0},selectLayout:function(e){return this.changeLayout.call(r("#layout_buttons a[data-size="+e+"]").get(0))},changeMobileLayout:function(){var e,t;t=c.get("wants_reduced_ui"),o.isUndefined(t)&&(t=!0),e=!t,c.set("wants_reduced_ui",e),s.legacyTrack("mobile","switched_layout"),window.location.reload()},toggleFooterMenu:function(){return r(window).scrollTop(r("#site_footer_list").toggle().offset().top),r(this).toggleClass("expanded"),!1},toggleElement:function(e,t,n){n=n||function(){return!0},e.preventDefault(),e.stopPropagation(),t.toggleClass("open"),r("#page_content").off("click.mobile_menu"),setTimeout(function(){return r("#page_content").one("click.mobile_menu",function(e){n(e)&&(e.preventDefault(),u.closeElement(t),r(".open_filter").removeClass("filters_active"))})},500)},closeElement:function(e){e.removeClass("open")},savePageLayout:function(){var e,t;t=r(this).data("size"),e=r("#layout_buttons").data("section"),i.loggedIn&&c.set(e+"_layout",t)},mode:function(){var e,t;return e=r("html"),(null!=(t=u.breakpoints)?t.get("<=mobile"):void 0)&&e.hasClass("needs_reduced_ui")&&e.hasClass("is_mobile")?"mobile":"desktop"}},u.ready=d(u.init.bind(u)),u})},305:function(e,t,n){var r;r=n(11),e.exports=function(){var e,t;return e=void 0,t=new r(function(t){return e=t}),t.__resolveInit=e,t}()},306:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:_;return v.default.all([x.sendEvent("send",e,t,n,r,o,i),x.sendEvent("labs.send",e,t,n,r,o,i)])}function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_;return setTimeout(function(){if(!(0,y.isUndefined)(e)&&!(0,y.isString)(e))throw new Error("google.legacyTrackPageView called with invalid page argument: "+JSON.stringify(e)+".");if(!(0,y.isUndefined)(t)&&!(0,y.isString)(t))throw new Error("google.legacyTrackPageView called with invalid title argument: "+JSON.stringify(t)+".")},0),v.default.all([x.sendPageView("send",e,t,n),x.sendPageView("labs.send",e,t,n)])}function s(){var e=new x("UA-36965964-1","",{sampleRate:10}),t=h.default.userInLabs?100:2e4/8651350*100,n=new x("UA-36965964-3","labs",{sampleRate:t}),r=[e,n];r.map(function(e){e.setDimensions([h.default.locale]),h.default.loggedIn&&(e.set("&uid",h.default.userID),e.setMetrics([h.default.userNumSubmissions,h.default.userNumOrders,h.default.userNumPurchases,h.default.userNumApps,h.default.userUsesOfficialApp?1:0,h.default.userNumCollection,h.default.userNumWantlist]))});var o=document.getElementsByClassName("ga-require-plugin-command");return Array.prototype.map.call(o,function(t){e.require(t.dataset.pluginName)}),{universalProperty:e,labsProperty:n}}function l(){return window.dataLayer=window.dataLayer||[],window.dataLayer.push({"gtm.start":(new Date).getTime(),event:"gtm.js"}),new v.default(function(e,t){var n=document.createElement("script"),r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(n,r),n.onload=e,n.onerror=t,n.async=!0,n.src="//www.googletagmanager.com/gtm.js?id=GTM-NGJZRJ"})}function c(){return window.GoogleAnalyticsObject="ga",window.ga=window.ga||function(){(window.ga.q=window.ga.q||[]).push(arguments),window.ga.l=1*new Date,h.default.enableGaDebuggingVerbose&&(window.ga_debug={trace:!0})},new v.default(function(e,t){var n=document.createElement("script"),r=document.getElementsByTagName("script")[0],o=h.default.enableGaDebugging?"analytics_debug.js":"analytics.js";r.parentNode.insertBefore(n,r),n.onload=e,n.onerror=t,n.async=!0,n.src="//www.google-analytics.com/"+o}).then(s)}function u(){return h.default.enableGoogleAnalytics?(k||(k=w.init().then(function(){return v.default.all([c(),l()])})),k):(0,b.isTest)()?v.default.resolve("Testing"):v.default.reject("Disabled")}Object.defineProperty(t,"__esModule",{value:!0}),t.AnalyticsProperty=t.TIMEOUT=void 0;var d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.legacyTrack=i,t.legacyTrackPageView=a,t.init=u;var f=n(7),h=r(f),p=n(305),g=r(p),m=n(11),v=r(m),y=n(3),b=n(24),w=n(307),_=t.TIMEOUT=(0,b.isTest)()?500:3e4,k=!1,x=t.AnalyticsProperty=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};o(this,e),this.id=t,this.name=n,this.options=r,this._command("create",this.id,"auto",this.name,this.options),this.require("displayfeatures")}return d(e,[{key:"_prefix",value:function(){return this.name.length?this.name+".":""}},{key:"_command",value:function(e){for(var t,n="create"===e?"":this._prefix(),r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return(t=window).ga.apply(t,[""+n+e].concat(o))}},{key:"set",value:function(e,t){return this._command("set",e,t)}},{key:"require",value:function(e){return this._command("require",e)}},{key:"setDimensions",value:function(e){var t=this;return null==e&&(e=[]),e.forEach(function(e,n){return t.set("dimension"+(n+1),e)})}},{key:"setMetrics",value:function(e){var t=this;return null==e&&(e=[]),e.forEach(function(e,n){return t.set("metric"+(n+1),e)})}},{key:"trackPageView",value:function(t,n){return e.sendPageView(this._prefix()+"send",t,n)}},{key:"trackEvent",value:function(t,n,r,o,i){return null==i&&(i=!1),e.sendEvent(this._prefix()+"send",t,n,r,o,i)}}],[{key:"sendEvent",value:function(e,t,n,r,o,i){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:_;return new v.default(function(s,l){return v.default.all([g.default,u()]).then(function(){var c=function(){return l("google.sendEvent() timed out in "+a+"ms.")},u=setTimeout(c,a),d=function(e){return clearTimeout(u),s(e)};return window.ga(e,"event",{eventCategory:t,eventAction:n,eventLabel:r,eventValue:o,nonInteraction:i,hitCallback:d})}).catch(y.noop)})}},{key:"sendPageView",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:_;return new v.default(function(o,i){return v.default.all([g.default,u()]).then(function(){var a={hitCallback:function(e){return clearTimeout(l),o(e)}};t&&(a.page=t),n&&(a.title=n);var s=function(){return i("google.sendPageView() timed out in "+r+"ms.")},l=setTimeout(s,r);return window.ga(e,"pageview",a)}).catch(y.noop)})}}]),e}()},307:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n='<a href="'+M+'">',r="</a>",o=x("\nThis site uses cookies to offer you a better browsing experience and deliver \npersonalized content. Find out more about our %(startTag)sCookie and Internet\nAdvertising Policy%(endTag)s. We're working to provide you more options for \nwhich cookies to allow. In the meantime you may choose to accept all cookies \nor only those required for the site to function.\n    ")({startTag:n,endTag:r}),i='\n        <div class="buttons">\n            <button class="button button-green consent-accept">\n                <i class="icon icon-check" />\n                '+x("Agree to All")()+'\n            </button>\n            <button class="button consent-reject">\n                <i class="icon icon-ban" />\n                '+x("Disagree to All")()+"\n            </button>\n        </div>",a='\n        <div class="text">\n            '+o+"\n        </div>\n        "+i+"\n    ",s=C({position:"bottom",acceptable:!0,closable:!1,id:"cookie-consent",message:a,type:"info"});return w("#cookie-consent .consent-accept").click(function(){e(),s.remove()}),w("#cookie-consent .consent-reject").click(function(){t(),s.remove()}),s}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{expires:30},n=t.expires,r=t.domain,o=t.path;return(0,v.default)(I,e,{expires:n,domain:r,path:o})}function a(){return fetch(V).then(function(e){return e.json()}).catch(T)}function s(){return(0,v.default)(I)}function l(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e)return _.resolve(new g.ConsentString(e));var n=new g.ConsentString;n.setCmpId(P),n.setCmpVersion(D),n.setConsentScreen(O);var r=t?a():_.resolve(j);return r.then(function(e){return n.setGlobalVendorList(e),n})}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;return i(e.getConsentString(),{expires:t})}function u(){return l(s()).then(function(e){e.setPurposesAllowed($);var t=e.vendorList.vendors.map(function(e){return e.id});return e.setVendorsAllowed(t),c(e,1825),N.resolve("Consent approved")})}function d(){return l((0,v.default)(I)).then(function(e){return $.map(function(t){e.setPurposeAllowed(t,!1)}),e.vendorList.vendors.map(function(t){e.setVendorAllowed(t.id,!1)}),c(e,90),N.reject("Consent rejected")})}function f(){var e=(0,v.default)(I);return e&&e.length?l(e).then(function(e){return e.isPurposeAllowed($[0])?N.resolve("Consent approved"):N.reject("Consent rejected")}):o(u,d)}function h(){return A}function p(){return A&&!E?S().then(f):N.resolve(!0),L}Object.defineProperty(t,"__esModule",{value:!0}),t.cookieName=void 0,t.writeConsentCookie=i,t.getConsentCookie=s,t.getConsentData=l,t.writeConsentData=c,t.run=f,t.isRequired=h,t.init=p;var g=n(308),m=n(315),v=r(m),y=n(7),b=r(y);n(317);var w=n(2),_=n(11),k=n(25),x=k.getText,T=ds.require("logError"),C=n(318),S=n(13),A=b.default.requireCookieConsent,E=b.default.isDiscogsApp,I=t.cookieName="consent-string-iab-spec-v1.1",M="https://support.discogs.com/hc/en-us/articles/360001134454-Discogs-Policies#cookies2018",P=1,D=1,O=1,V="/vendorlist.json",j={vendorListVersion:999999,lastUpdated:"2018-07-22T00:00:00Z",purposes:[{id:1,name:"Information storage and access",description:"The storage of information, or access to information that is already stored, on your device such as advertising identifiers, device identifiers, cookies, and similar technologies."},{id:2,name:"Personalisation",description:"The collection and processing of information about your use of this service to subsequently personalise advertising and/or content for you in other contexts, such as on other websites or apps, over time. Typically, the content of the site or app is used to make inferences about your interests, which inform future selection of advertising and/or content."},{id:3,name:"Ad selection, delivery, reporting",description:"The collection of information, and combination with previously collected information, to select and deliver advertisements for you, and to measure the delivery and effectiveness of such advertisements. This includes using previously collected information about your interests to select ads, processing data about what advertisements were shown, how often they were shown, when and where they were shown, and whether you took any action related to the advertisement, including for example clicking an ad or making a purchase. This does not include personalisation, which is the collection and processing of information about your use of this service to subsequently personalise advertising and/or content for you in other contexts, such as websites or apps, over time."},{id:4,name:"Content selection, delivery, reporting",description:"The collection of information, and combination with previously collected information, to select and deliver content for you, and to measure the delivery and effectiveness of such content. This includes using previously collected information about your interests to select content, processing data about what content was shown, how often or how long it was shown, when and where it was shown, and whether the you took any action related to the content, including for example clicking on content. This does not include personalisation, which is the collection and processing of information about your use of this service to subsequently personalise content and/or advertising for you in other contexts, such as websites or apps, over time."},{id:5,name:"Measurement",description:"The collection of information about your use of the content, and combination with previously collected information, used to measure, understand, and report on your usage of the service. This does not include personalisation, the collection of information about your use of this service to subsequently personalise content and/or advertising for you in other contexts, i.e. on other service, such as websites or apps, over time."}],features:[{id:1,name:"Matching Data to Offline Sources",description:"Combining data from offline sources that were initially collected in other contexts."},{id:2,name:"Linking Devices",description:"Allow processing of a user's data to connect such user across multiple devices."},{id:3,name:"Precise Geographic Location Data",description:"Allow processing of a user's precise geographic location data in support of a purpose for which that certain third party has consent."}],vendors:[{id:1,name:"Exponential Interactive, Inc",policyUrl:"http://exponential.com/privacy",
purposeIds:[1,2,3,4,5],legIntPurposeIds:[],featureIds:[]},{id:13,name:"Sovrn Holdings Inc",policyUrl:"https://www.sovrn.com/sovrn-privacy/",purposeIds:[1,2,3],legIntPurposeIds:[],featureIds:[2,3]},{id:69,name:"OpenX Software Ltd. and its affiliates",policyUrl:"https://www.openx.com/legal/privacy-policy/",purposeIds:[1,2,3],legIntPurposeIds:[],featureIds:[1,2,3]},{id:77,name:"comScore, Inc.",policyUrl:"https://www.comscore.com/About-comScore/Privacy-Policy",purposeIds:[1,5],legIntPurposeIds:[],featureIds:[2]}]},$=[3,4,5],N={},L=new _(function(e,t){N.resolve=e,N.reject=t})},308:function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=(Array.from||function(){var e=function(e){return"function"==typeof e},t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t},n=Math.pow(2,53)-1,o=function(e){var r=t(e);return Math.min(Math.max(r,0),n)},i=function(e){if(null!=e){if(["string","number","boolean","symbol"].indexOf("undefined"==typeof e?"undefined":r(e))>-1)return Symbol.iterator;if("undefined"!=typeof Symbol&&"iterator"in Symbol&&Symbol.iterator in e)return Symbol.iterator;if("@@iterator"in e)return"@@iterator"}},a=function(t,n){if(null!=t&&null!=n){var r=t[n];if(null==r)return;if(!e(r))throw new TypeError(r+" is not a function");return r}},s=function(e){var t=e.next(),n=Boolean(t.done);return!n&&t};return function(t){var n,r=this,l=arguments.length>1?arguments[1]:void 0;if("undefined"!=typeof l){if(!e(l))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(n=arguments[2])}var c,u,d=a(t,i(t));if(void 0!==d){c=e(r)?Object(new r):[];var f=d.call(t);if(null==f)throw new TypeError("Array.from requires an array-like or iterable object");u=0;for(var h,p;;){if(h=s(f),!h)return c.length=u,c;p=h.value,l?c[u]=l.call(n,p,u):c[u]=p,u++}}else{var g=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var m=o(g.length);c=e(r)?Object(new r(m)):new Array(m),u=0;for(var v;u<m;)v=g[u],l?c[u]=l.call(n,v,u):c[u]=v,u++;c.length=m}return c}}(),n(309)),i=o.ConsentString,a=n(314),s=a.decodeConsentString,l=n(310),c=l.encodeConsentString;e.exports={ConsentString:i,decodeConsentString:s,encodeConsentString:c}},309:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=(Array.from||function(){var e=function(e){return"function"==typeof e},t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t},n=Math.pow(2,53)-1,r=function(e){var r=t(e);return Math.min(Math.max(r,0),n)},i=function(e){if(null!=e){if(["string","number","boolean","symbol"].indexOf("undefined"==typeof e?"undefined":o(e))>-1)return Symbol.iterator;if("undefined"!=typeof Symbol&&"iterator"in Symbol&&Symbol.iterator in e)return Symbol.iterator;if("@@iterator"in e)return"@@iterator"}},a=function(t,n){if(null!=t&&null!=n){var r=t[n];if(null==r)return;if(!e(r))throw new TypeError(r+" is not a function");return r}},s=function(e){var t=e.next(),n=Boolean(t.done);return!n&&t};return function(t){var n,o=this,l=arguments.length>1?arguments[1]:void 0;if("undefined"!=typeof l){if(!e(l))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(n=arguments[2])}var c,u,d=a(t,i(t));if(void 0!==d){c=e(o)?Object(new o):[];var f=d.call(t);if(null==f)throw new TypeError("Array.from requires an array-like or iterable object");u=0;for(var h,p;;){if(h=s(f),!h)return c.length=u,c;p=h.value,l?c[u]=l.call(n,p,u):c[u]=p,u++}}else{var g=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var m=r(g.length);c=e(o)?Object(new o(m)):new Array(m),u=0;for(var v;u<m;)v=g[u],l?c[u]=l.call(n,v,u):c[u]=v,u++;c.length=m}return c}}(),n(310)),s=a.encodeConsentString,l=n(314),c=l.decodeConsentString,u=n(313),d=u.vendorVersionMap,f=/^[a-z]{2}$/,h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;r(this,e),this.created=new Date,this.lastUpdated=new Date,this.version=1,this.vendorList=null,this.vendorListVersion=null,this.cmpId=null,this.cmpVersion=null,this.consentScreen=null,this.consentLanguage=null,this.allowedPurposeIds=[],this.allowedVendorIds=[],t&&Object.assign(this,c(t))}return i(e,[{key:"getConsentString",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this.vendorList)throw new Error("ConsentString - A vendor list is required to encode a consent string");return e===!0&&(this.lastUpdated=new Date),s({version:this.getVersion(),vendorList:this.vendorList,allowedPurposeIds:this.allowedPurposeIds,allowedVendorIds:this.allowedVendorIds,created:this.created,lastUpdated:this.lastUpdated,cmpId:this.cmpId,cmpVersion:this.cmpVersion,consentScreen:this.consentScreen,consentLanguage:this.consentLanguage,vendorListVersion:this.vendorListVersion})}},{key:"getMetadataString",value:function(){return s({version:this.getVersion(),created:this.created,lastUpdated:this.lastUpdated,cmpId:this.cmpId,cmpVersion:this.cmpVersion,consentScreen:this.consentScreen,vendorListVersion:this.vendorListVersion})}},{key:"getVersion",value:function(){return this.version}},{key:"getVendorListVersion",value:function(){return this.vendorListVersion}},{key:"setGlobalVendorList",value:function(e){if("object"!==("undefined"==typeof e?"undefined":o(e)))throw new Error("ConsentString - You must provide an object when setting the global vendor list");if(!e.vendorListVersion||!Array.isArray(e.purposes)||!Array.isArray(e.vendors))throw new Error("ConsentString - The provided vendor list does not respect the schema from the IAB EU’s GDPR Consent and Transparency Framework");this.vendorList={vendorListVersion:e.vendorListVersion,lastUpdated:e.lastUpdated,purposes:e.purposes,features:e.features,vendors:e.vendors.slice(0).sort(function(e,t){return e.id<t.id?-1:1})},this.vendorListVersion=e.vendorListVersion}},{key:"setCmpId",value:function(e){this.cmpId=e}},{key:"getCmpId",value:function(){return this.cmpId}},{key:"setCmpVersion",value:function(e){this.cmpVersion=e}},{key:"getCmpVersion",value:function(){return this.cmpVersion}},{key:"setConsentScreen",value:function(e){this.consentScreen=e}},{key:"getConsentScreen",value:function(){return this.consentScreen}},{key:"setConsentLanguage",value:function(e){if(f.test(e)===!1)throw new Error("ConsentString - The consent language must be a two-letter ISO639-1 code (en, fr, de, etc.)");this.consentLanguage=e}},{key:"getConsentLanguage",value:function(){return this.consentLanguage}},{key:"setPurposesAllowed",value:function(e){this.allowedPurposeIds=e}},{key:"getPurposesAllowed",value:function(){return this.allowedPurposeIds}},{key:"setPurposeAllowed",value:function(e,t){var n=this.allowedPurposeIds.indexOf(e);t===!0?n===-1&&this.allowedPurposeIds.push(e):t===!1&&n!==-1&&this.allowedPurposeIds.splice(n,1)}},{key:"isPurposeAllowed",value:function(e){return this.allowedPurposeIds.indexOf(e)!==-1}},{key:"setVendorsAllowed",value:function(e){this.allowedVendorIds=e}},{key:"getVendorsAllowed",value:function(){return this.allowedVendorIds}},{key:"setVendorAllowed",value:function(e,t){var n=this.allowedVendorIds.indexOf(e);t===!0?n===-1&&this.allowedVendorIds.push(e):t===!1&&n!==-1&&this.allowedVendorIds.splice(n,1)}},{key:"isVendorAllowed",value:function(e){return this.allowedVendorIds.indexOf(e)!==-1}}],[{key:"decodeMetadataString",value:function(e){var t=c(e),n={};return d[t.version].metadataFields.forEach(function(e){n[e]=t[e]}),n}}]),e}();e.exports={ConsentString:h}},310:function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return u(e)}function o(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n="",r=1;r<=e;r+=1)n+=t.indexOf(r)!==-1?"1":"0";return h(n,Math.max(0,e-n.length))}function i(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set,n=Math.max.apply(Math,[0].concat(r(e.map(function(e){var t=e.id;return t})),r(u(t)))),o="",i=1;i<=n;i+=1)o+=t.indexOf(i)!==-1?"1":"0";return o}function a(e,t){var n=[],o=e.map(function(e){return e.id});return e.reduce(function(i,a,s){var l=a.id;if(t.indexOf(l)!==-1&&n.push(l),(t.indexOf(l)===-1||s===e.length-1||o.indexOf(l+1)===-1)&&n.length){var c=n.shift(),u=n.pop();return n=[],[].concat(r(i),[{isRange:"number"==typeof u,startVendorId:c,endVendorId:u}])}return i},[])}function s(e){var t=e.maxVendorId,n=e.vendorList,r=void 0===n?{}:n,s=e.allowedPurposeIds,l=e.allowedVendorIds,u=r.vendors,d=void 0===u?[]:u,h=r.purposes,p=void 0===h?[]:h;t||(t=0,d.forEach(function(e){e.id>t&&(t=e.id)}));var g=f(c({},e,{maxVendorId:t,purposeIdBitString:i(p,s),isRange:!1,vendorIdBitString:o(t,l)})),m=a(d,l),v=f(c({},e,{maxVendorId:t,purposeIdBitString:i(p,s),isRange:!0,defaultConsent:!1,numEntries:m.length,vendorRangeList:m}));return g.length<v.length?g:v}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=Array.from||function(){var e=function(e){return"function"==typeof e},t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t},n=Math.pow(2,53)-1,r=function(e){var r=t(e);return Math.min(Math.max(r,0),n)},o=function(e){if(null!=e){if(["string","number","boolean","symbol"].indexOf("undefined"==typeof e?"undefined":l(e))>-1)return Symbol.iterator;if("undefined"!=typeof Symbol&&"iterator"in Symbol&&Symbol.iterator in e)return Symbol.iterator;if("@@iterator"in e)return"@@iterator"}},i=function(t,n){if(null!=t&&null!=n){var r=t[n];if(null==r)return;if(!e(r))throw new TypeError(r+" is not a function");return r}},a=function(e){var t=e.next(),n=Boolean(t.done);return!n&&t};return function(t){var n,s=this,l=arguments.length>1?arguments[1]:void 0;if("undefined"!=typeof l){if(!e(l))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(n=arguments[2])}var c,u,d=i(t,o(t));if(void 0!==d){c=e(s)?Object(new s):[];var f=d.call(t);if(null==f)throw new TypeError("Array.from requires an array-like or iterable object");u=0;for(var h,p;;){if(h=a(f),!h)return c.length=u,c;p=h.value,l?c[u]=l.call(n,p,u):c[u]=p,u++}}else{var g=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var m=r(g.length);c=e(s)?Object(new s(m)):new Array(m),u=0;for(var v;u<m;)v=g[u],l?c[u]=l.call(n,v,u):c[u]=v,u++;c.length=m}return c}}(),d=n(311),f=d.encodeToBase64,h=d.padRight;e.exports={convertVendorsToRanges:a,encodeConsentString:s}},311:function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return A(e)}function o(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0",n="",r=0;r<e;r+=1)n+=t;return n}function i(e,t){return o(Math.max(0,t))+e}function a(e,t){return e+o(Math.max(0,t))}function s(e,t){var n="";return"number"!=typeof e||isNaN(e)||(n=parseInt(e,10).toString(2)),t>=n.length&&(n=i(n,t-n.length)),n.length>t&&(n=n.substring(0,t)),n}function l(e){return s(e===!0?1:0,1)}function c(e,t){return e instanceof Date?s(e.getTime()/100,t):s(e,t)}function u(e,t){return s(e.toUpperCase().charCodeAt(0)-65,t)}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;return u(e.slice(0,1),t/2)+u(e.slice(1),t/2)}function f(e,t,n){return parseInt(e.substr(t,n),2)}function h(e,t,n){return new Date(100*f(e,t,n))}function p(e,t){return 1===parseInt(e.substr(t,1),2)}function g(e){var t=f(e);return String.fromCharCode(t+65).toLowerCase()}function m(e,t,n){var r=e.substr(t,n);return g(r.slice(0,n/2))+g(r.slice(n/2))}function v(e){var t=e.input,n=e.field,r=n.name,o=n.type,i=n.numBits,u=n.encoder,f=n.validator;if("function"==typeof f&&!f(t))return"";if("function"==typeof u)return u(t);var h="function"==typeof i?i(t):i,p=t[r],g=null===p||void 0===p?"":p;switch(o){case"int":return s(g,h);case"bool":return l(g);case"date":return c(g,h);case"bits":return a(g,h-g.length).substring(0,h);case"list":return g.reduce(function(e,t){return e+y({input:t,fields:n.fields})},"");case"language":return d(g,h);default:throw new Error("ConsentString - Unknown field type "+o+" for encoding")}}function y(e){var t=e.input,n=e.fields;return n.reduce(function(e,n){return e+=v({input:t,field:n})},"")}function b(e){var t=e.input,n=e.output,o=e.startPosition,i=e.field,a=i.type,s=i.numBits,l=i.decoder,c=i.validator,u=i.listCount;if("function"==typeof c&&!c(n))return{newPosition:o};if("function"==typeof l)return l(t,n,o);var d="function"==typeof s?s(n):s,g=0;switch("function"==typeof u?g=u(n):"number"==typeof u&&(g=u),a){case"int":return{fieldValue:f(t,o,d)};case"bool":return{fieldValue:p(t,o)};case"date":return{fieldValue:h(t,o,d)};case"bits":return{fieldValue:t.substr(o,d)};case"list":return new Array(g).fill().reduce(function(e){var n=w({input:t,fields:i.fields,startPosition:e.newPosition}),o=n.decodedObject,a=n.newPosition;return{fieldValue:[].concat(r(e.fieldValue),[o]),newPosition:a}},{fieldValue:[],newPosition:o});case"language":return{fieldValue:m(t,o,d)};default:throw new Error("ConsentString - Unknown field type "+a+" for decoding")}}function w(e){var t=e.input,n=e.fields,r=e.startPosition,o=void 0===r?0:r,i=o,a=n.reduce(function(e,n){var r=n.name,o=n.numBits,a=b({input:t,output:e,startPosition:i,field:n}),s=a.fieldValue,l=a.newPosition;return void 0!==s&&(e[r]=s),void 0!==l?i=l:"number"==typeof o&&(i+=o),e},{});return{decodedObject:a,newPosition:i}}function _(e,t){var n=e.version;if("number"!=typeof n)throw new Error("ConsentString - No version field to encode");if(t[n]){var r=t[n].fields;return y({input:e,fields:r})}throw new Error("ConsentString - No definition for version "+n)}function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:P,n=_(e,t);if(n){for(var r=a(n,7-(n.length+7)%8),o="",i=0;i<r.length;i+=8)o+=String.fromCharCode(parseInt(r.substr(i,8),2));return E.encode(o).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}return null}function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:P,n=f(e,0,M);if("number"!=typeof n)throw new Error("ConsentString - Unknown version number in the string to decode");if(!P[n])throw new Error("ConsentString - Unsupported version "+n+" in the string to decode");var r=t[n].fields,o=w({input:e,fields:r}),i=o.decodedObject;return i}function T(e,t){for(var n=e;n.length%4!==0;)n+="=";n=n.replace(/-/g,"+").replace(/_/g,"/");for(var r=E.decode(n),o="",a=0;a<r.length;a+=1){var s=r.charCodeAt(a).toString(2);o+=i(s,8-s.length)}return x(o,t)}function C(e){return e.split("").reduce(function(e,t,n){return"1"===t&&e.indexOf(n+1)===-1&&e.push(n+1),e},[])}var S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A=Array.from||function(){var e=function(e){return"function"==typeof e},t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t},n=Math.pow(2,53)-1,r=function(e){var r=t(e);return Math.min(Math.max(r,0),n)},o=function(e){if(null!=e){if(["string","number","boolean","symbol"].indexOf("undefined"==typeof e?"undefined":S(e))>-1)return Symbol.iterator;if("undefined"!=typeof Symbol&&"iterator"in Symbol&&Symbol.iterator in e)return Symbol.iterator;if("@@iterator"in e)return"@@iterator"}},i=function(t,n){if(null!=t&&null!=n){var r=t[n];if(null==r)return;if(!e(r))throw new TypeError(r+" is not a function");return r}},a=function(e){var t=e.next(),n=Boolean(t.done);return!n&&t};return function(t){var n,s=this,l=arguments.length>1?arguments[1]:void 0;if("undefined"!=typeof l){if(!e(l))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(n=arguments[2])}var c,u,d=i(t,o(t));if(void 0!==d){c=e(s)?Object(new s):[];var f=d.call(t);if(null==f)throw new TypeError("Array.from requires an array-like or iterable object");u=0;for(var h,p;;){if(h=a(f),!h)return c.length=u,c;p=h.value,l?c[u]=l.call(n,p,u):c[u]=p,u++}}else{var g=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var m=r(g.length);c=e(s)?Object(new s(m)):new Array(m),u=0;for(var v;u<m;)v=g[u],l?c[u]=l.call(n,v,u):c[u]=v,u++;c.length=m}return c}}(),E=n(312),I=n(313),M=I.versionNumBits,P=I.vendorVersionMap;e.exports={padRight:a,padLeft:i,encodeField:v,encodeDataToBits:_,encodeIntToBits:s,encodeBoolToBits:l,encodeDateToBits:c,encodeLanguageToBits:d,encodeLetterToBits:u,encodeToBase64:k,decodeBitsToIds:C,decodeBitsToInt:f,decodeBitsToDate:h,decodeBitsToBool:p,decodeBitsToLanguage:m,decodeBitsToLetter:g,decodeFromBase64:T}},312:function(e,t,n){var r;(function(e,o){!function(i){var a="object"==typeof t&&t,s=("object"==typeof e&&e&&e.exports==a&&e,"object"==typeof o&&o);s.global!==s&&s.window!==s||(i=s);var l=function(e){this.message=e};l.prototype=new Error,l.prototype.name="InvalidCharacterError";var c=function(e){throw new l(e)},u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=/[\t\n\f\r ]/g,f=function(e){e=String(e).replace(d,"");var t=e.length;t%4==0&&(e=e.replace(/==?$/,""),t=e.length),(t%4==1||/[^+a-zA-Z0-9\/]/.test(e))&&c("Invalid character: the string to be decoded is not correctly encoded.");for(var n,r,o=0,i="",a=-1;++a<t;)r=u.indexOf(e.charAt(a)),n=o%4?64*n+r:r,o++%4&&(i+=String.fromCharCode(255&n>>(-2*o&6)));return i},h=function(e){e=String(e),/[^\0-\xFF]/.test(e)&&c("The string to be encoded contains characters outside of the Latin1 range.");for(var t,n,r,o,i=e.length%3,a="",s=-1,l=e.length-i;++s<l;)t=e.charCodeAt(s)<<16,n=e.charCodeAt(++s)<<8,r=e.charCodeAt(++s),o=t+n+r,a+=u.charAt(o>>18&63)+u.charAt(o>>12&63)+u.charAt(o>>6&63)+u.charAt(63&o);return 2==i?(t=e.charCodeAt(s)<<8,n=e.charCodeAt(++s),o=t+n,a+=u.charAt(o>>10)+u.charAt(o>>4&63)+u.charAt(o<<2&63)+"="):1==i&&(o=e.charCodeAt(s),a+=u.charAt(o>>2)+u.charAt(o<<4&63)+"=="),a},p={encode:h,decode:f,version:"0.1.0"};r=function(){return p}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}(this)}).call(t,n(4)(e),function(){return this}())},313:function(e,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=(Array.from||function(){var e=function(e){return"function"==typeof e},t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t},r=Math.pow(2,53)-1,o=function(e){var n=t(e);return Math.min(Math.max(n,0),r)},i=function(e){if(null!=e){if(["string","number","boolean","symbol"].indexOf("undefined"==typeof e?"undefined":n(e))>-1)return Symbol.iterator;if("undefined"!=typeof Symbol&&"iterator"in Symbol&&Symbol.iterator in e)return Symbol.iterator;if("@@iterator"in e)return"@@iterator"}},a=function(t,n){if(null!=t&&null!=n){var r=t[n];if(null==r)return;if(!e(r))throw new TypeError(r+" is not a function");return r}},s=function(e){var t=e.next(),n=Boolean(t.done);return!n&&t};return function(t){var n,r=this,l=arguments.length>1?arguments[1]:void 0;if("undefined"!=typeof l){if(!e(l))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(n=arguments[2])}var c,u,d=a(t,i(t));if(void 0!==d){c=e(r)?Object(new r):[];var f=d.call(t);if(null==f)throw new TypeError("Array.from requires an array-like or iterable object");u=0;for(var h,p;;){if(h=s(f),!h)return c.length=u,c;p=h.value,l?c[u]=l.call(n,p,u):c[u]=p,u++}}else{var g=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var m=o(g.length);c=e(r)?Object(new r(m)):new Array(m),u=0;for(var v;u<m;)v=g[u],l?c[u]=l.call(n,v,u):c[u]=v,u++;c.length=m}return c}}(),6),o={1:{version:1,metadataFields:["version","created","lastUpdated","cmpId","cmpVersion","consentScreen","vendorListVersion"],fields:[{name:"version",type:"int",numBits:6},{name:"created",type:"date",numBits:36},{name:"lastUpdated",type:"date",numBits:36},{name:"cmpId",type:"int",numBits:12},{name:"cmpVersion",type:"int",numBits:12},{name:"consentScreen",type:"int",numBits:6},{name:"consentLanguage",type:"language",numBits:12},{name:"vendorListVersion",type:"int",numBits:12},{name:"purposeIdBitString",type:"bits",numBits:24},{name:"maxVendorId",type:"int",numBits:16},{name:"isRange",type:"bool",numBits:1},{name:"vendorIdBitString",type:"bits",numBits:function(e){return e.maxVendorId},validator:function(e){return!e.isRange}},{name:"defaultConsent",type:"bool",numBits:1,validator:function(e){return e.isRange}},{name:"numEntries",numBits:12,type:"int",validator:function(e){return e.isRange}},{name:"vendorRangeList",type:"list",listCount:function(e){return e.numEntries},validator:function(e){return e.isRange},fields:[{name:"isRange",type:"bool",numBits:1},{name:"startVendorId",type:"int",numBits:16},{name:"endVendorId",type:"int",numBits:16,validator:function(e){return e.isRange}}]}]}};e.exports={versionNumBits:r,vendorVersionMap:o}},314:function(e,t,n){"use strict";function r(e){var t=s(e),n=t.version,r=t.cmpId,o=t.vendorListVersion,i=t.purposeIdBitString,l=t.maxVendorId,c=t.created,u=t.lastUpdated,d=t.isRange,f=t.defaultConsent,h=t.vendorIdBitString,p=t.vendorRangeList,g=t.cmpVersion,m=t.consentScreen,v=t.consentLanguage,y={version:n,cmpId:r,vendorListVersion:o,allowedPurposeIds:a(i),maxVendorId:l,created:c,lastUpdated:u,cmpVersion:g,consentScreen:m,consentLanguage:v};if(d){var b=p.reduce(function(e,t){for(var n=t.isRange,r=t.startVendorId,o=t.endVendorId,i=n?o:r,a=r;a<=i;a+=1)e[a]=!0;return e},{});y.allowedVendorIds=[];for(var w=0;w<=l;w+=1)(f&&!b[w]||!f&&b[w])&&y.allowedVendorIds.indexOf(w)===-1&&y.allowedVendorIds.push(w)}else y.allowedVendorIds=a(h);return y}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=(Array.from||function(){var e=function(e){return"function"==typeof e},t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t},n=Math.pow(2,53)-1,r=function(e){var r=t(e);return Math.min(Math.max(r,0),n)},i=function(e){if(null!=e){if(["string","number","boolean","symbol"].indexOf("undefined"==typeof e?"undefined":o(e))>-1)return Symbol.iterator;if("undefined"!=typeof Symbol&&"iterator"in Symbol&&Symbol.iterator in e)return Symbol.iterator;if("@@iterator"in e)return"@@iterator"}},a=function(t,n){if(null!=t&&null!=n){var r=t[n];if(null==r)return;if(!e(r))throw new TypeError(r+" is not a function");return r}},s=function(e){var t=e.next(),n=Boolean(t.done);return!n&&t};return function(t){var n,o=this,l=arguments.length>1?arguments[1]:void 0;if("undefined"!=typeof l){if(!e(l))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(n=arguments[2])}var c,u,d=a(t,i(t));if(void 0!==d){c=e(o)?Object(new o):[];var f=d.call(t);if(null==f)throw new TypeError("Array.from requires an array-like or iterable object");u=0;for(var h,p;;){if(h=s(f),!h)return c.length=u,c;p=h.value,l?c[u]=l.call(n,p,u):c[u]=p,u++}}else{var g=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var m=r(g.length);c=e(o)?Object(new o(m)):new Array(m),u=0;for(var v;u<m;)v=g[u],l?c[u]=l.call(n,v,u):c[u]=v,u++;c.length=m}return c}}(),n(311)),a=i.decodeBitsToIds,s=i.decodeFromBase64;e.exports={decodeConsentString:r}},315:function(e,t,n){var r,o,i,a,s,l;l=n(7),r=n(2),i=n(3),o=n(316),s=i.memoize(function(){return{domain:l.cookieDomain,path:"/",expires:365}}),a=function(e,t,n){return arguments.length>1?o.set(e,t,r.extend({},s(),n)):o.get(e)},a.removeCookie=function(e,t){return o.remove(e,r.extend({},s(),t))},e.exports=function(){return e.exports.cookie.apply(this,arguments)},e.exports.cookie=a,e.exports.removeCookie=a.removeCookie,ds.define("cookie",function(){return a})},317:function(e,t){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!=typeof e&&(e=String(e)),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return v.iterable&&(t[Symbol.iterator]=function(){return t}),t}function o(e){this.map={},e instanceof o?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function i(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function a(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function s(e){var t=new FileReader,n=a(t);return t.readAsArrayBuffer(e),n}function l(e){var t=new FileReader,n=a(t);return t.readAsText(e),n}function c(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}function u(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function d(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(v.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(v.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(v.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(v.arrayBuffer&&v.blob&&b(e))this._bodyArrayBuffer=u(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!v.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!w(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=u(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):v.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},v.blob&&(this.blob=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?i(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return l(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},v.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(e){var t=e.toUpperCase();return _.indexOf(t)>-1?t:e}function h(e,t){t=t||{};var n=t.body;if("string"==typeof e)this.url=e;else{if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new o(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new o(t.headers)),this.method=f(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function p(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}}),t}function g(e){var t=new o;return e.split("\r\n").forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();t.append(r,o)}}),t}function m(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new o(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var v={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(v.arrayBuffer)var y=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],b=function(e){return e&&DataView.prototype.isPrototypeOf(e)},w=ArrayBuffer.isView||function(e){return e&&y.indexOf(Object.prototype.toString.call(e))>-1};o.prototype.append=function(e,r){e=t(e),r=n(r);var o=this.map[e];o||(o=[],this.map[e]=o),o.push(r)},o.prototype.delete=function(e){delete this.map[t(e)]},o.prototype.get=function(e){var n=this.map[t(e)];return n?n[0]:null},o.prototype.getAll=function(e){return this.map[t(e)]||[]},o.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},o.prototype.set=function(e,r){this.map[t(e)]=[n(r)]},o.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(r){e.call(t,r,n,this)},this)},this)},o.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},o.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},o.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},v.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var _=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];h.prototype.clone=function(){return new h(this,{body:this._bodyInit})},d.call(h.prototype),d.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},m.error=function(){var e=new m(null,{status:0,statusText:""});return e.type="error",e};var k=[301,302,303,307,308];m.redirect=function(e,t){if(k.indexOf(t)===-1)throw new RangeError("Invalid status code");return new m(null,{status:t,headers:{location:e}})},e.Headers=o,e.Request=h,e.Response=m,e.fetch=function(e,t){return new Promise(function(n,r){var o=new h(e,t),i=new XMLHttpRequest;i.onload=function(){var e={status:i.status,statusText:i.statusText,headers:g(i.getAllResponseHeaders()||"")};e.url="responseURL"in i?i.responseURL:e.headers.get("X-Request-URL");var t="response"in i?i.response:i.responseText;n(new m(t,e))},i.onerror=function(){
r(new TypeError("Network request failed"))},i.ontimeout=function(){r(new TypeError("Network request failed"))},i.open(o.method,o.url,!0),"include"===o.credentials&&(i.withCredentials=!0),"responseType"in i&&v.blob&&(i.responseType="blob"),o.headers.forEach(function(e,t){i.setRequestHeader(t,e)}),i.send("undefined"==typeof o._bodyInit?null:o._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},318:function(e,t,n){var r,o,i,a,s,l,c,u,d,f,h,p,g,m,v,y,b,w=function(e,t){return function(){return e.apply(t,arguments)}};r=n(2),u=n(3),b=n(5),v=n(13),n(315),d=ds.require("cookie"),p=b.classSet,a=300,o=1e4,s="am_",l="1",c=57,f={type:"info",id:void 0,cookie:void 0,showUntil:void 0,autoClose:!1,closable:!1,announcement:!1,position:"top",fullWidth:!1,isFixed:!1},g={error:"exclamation-triangle",info:"info-circle",warning:"exclamation-triangle",accept:"check-circle",lab:"flask",announcement:"bullhorn",news:"newspaper-o"},h=function(e){var t,n,o,a;return n=e.id,n&&null!=(o=r("#"+n).data("alertMessageView"))&&o.remove(),a=new i(e),a.isVisible()?(t=r(e.selector||".flash_messages"),t.append(a.$element)):a.remove(),a},y=/(.+)\s/,i=function(){function e(e){var t;this.model=null!=e?e:{},this.scrollHandler=w(this.scrollHandler,this),this.tryToAutoClose=w(this.tryToAutoClose,this),this.mouseHandler=w(this.mouseHandler,this),this.closeHandler=w(this.closeHandler,this),u.defaults(this.model,f),(null!=(t=this.model.showUntil)?t.indexOf(" "):void 0)>0&&(this.model.showUntil=this.model.showUntil.match(y)[1]),this.$element||(this.$element=this.make()),this.$element.data("alertMessageView",this),this.addHandlers(),this.model.autoClose&&this.scheduleClose()}return e.prototype.make=function(){return r(this.model.element?this.model.element:this.template(this.model))},e.prototype.remove=function(){return this.model.closable&&(this.$element.off("mouseenter.alertMessage mouseleave.alertMessage",this.mouseHandler),this.$element.off("click",".alert-message-close-icon",this.closeHandler)),this.model.isFixed&&r(window).off("scroll",this.scrollHandler),this.$element.remove()},e.prototype.addHandlers=function(){if(this.model.closable&&(this.$element.on("mouseenter.alertMessage mouseleave.alertMessage",this.mouseHandler),this.$element.on("click",".alert-message-close-icon",this.closeHandler)),this.model.isFixed)return r(window).on("scroll",this.scrollHandler)},e.prototype.template=function(e){var t,n,r,o,i,a,s,l,u,d,f,h,m,v;return d=e.message,m=e.type,l=e.id,a=e.cookie,h=e.showUntil,o=e.closable,n=e.autoClose,t=e.announcement,f=e.position,s=e.fullWidth,u=e.isFixed,v="alert-message-"+m,r=p({"alert-message-closable":o,"alert-message-broadcast":t,"alert-message-top":"top"===f,"alert-message-bottom":"bottom"===f,"alert-message-fixed":u,"alert-message-fixed-scrolled":u&&window.pageYOffset>=c}),i=p({"alert-message-full-width":s}),"<div class='alert-message alert-message-js "+v+" "+r+"' "+(l?"id='"+l+"'":"")+" data-alert-message-closable='"+o+"' data-alert-message-auto-close='"+n+"' "+(a?"data-alert-message-cookie='"+a+"'":"")+" "+(h?"data-alert-message-show-until='"+h+"'":"")+" > <div class='alert-message-content "+i+"' float_fix> <i class='icon icon-"+g[m]+" alert-message-icon'></i> "+(o?"<a class='alert-message-close-icon'><i class='icon icon-times'></i></a>":"")+" <span class='alert-message-text'>"+d+"</span> <div> </div>"},e.prototype.close=function(){return clearTimeout(this.scheduledClose),this.$element.slideUp(a,function(e){return function(){return e.remove()}}(this))},e.prototype.cookieName=function(){return""+s+this.model.cookie},e.prototype.shouldRemember=function(){return null!=this.model.cookie},e.prototype.remember=function(){var e,t,n,r;return r=new Date,n=new Date,t=this.model.showUntil?Date.parse(this.model.showUntil):n.setDate(n.getDate()+14),e=Math.ceil((t-r.getTime())/1e3/60/60/24),e>0&&d(this.cookieName(),l,{expires:e})},e.prototype.forget=function(){if(this.shouldRemember())return d.removeCookie(this.cookieName())},e.prototype.isDismissed=function(){return d(this.cookieName())},e.prototype.isExpired=function(){return null!=this.model.showUntil&&new Date>new Date(this.model.showUntil)},e.prototype.isVisible=function(){return!(this.isExpired()||this.isDismissed())},e.prototype.closeHandler=function(e){var t,n;t=0===this.$element.find(e.target).length,n=1===r(e.target).closest(this.$element.find(".alert-message-close-icon")).length,(t||n)&&(this.close(),this.shouldRemember()&&this.remember())},e.prototype.mouseHandler=function(e){this.isCursorOverElement="mouseenter"===e.type},e.prototype.getOffset=function(){return null!=this.offset?this.offset:this.offset=this.$element.offset().top+this.$element.outerHeight()},e.prototype.isOkayToClose=function(){var e;return e=window.scrollY>this.getOffset(),!e&&!this.isCursorOverElement},e.prototype.tryToAutoClose=function(){return this.isOkayToClose()?this.close():this.scheduleClose()},e.prototype.scheduleClose=function(){return clearTimeout(this.scheduledClose),this.scheduledClose=setTimeout(this.tryToAutoClose,o)},e.prototype.scrollHandler=function(){var e;return e=window.pageYOffset,this.$element.toggleClass("alert-message-fixed-scrolled",e>=c)},e}(),m=function(e){var t,n,o;return t=r(e),n=t.data(),o={message:r.trim(t.find(".alert-message-content").html()),closable:n.alertMessageClosable,autoClose:n.alertMessageAutoClose,element:e,cookie:n.alertMessageCookie,showUntil:n.alertMessageShowUntil},new i(o)},v(function(){return r(".alert-message").each(function(){return m(this)})}),e.exports=h,ds.define("alertMessage",function(){return h})},320:function(e,t,n){var r,o,i,a,s,l;r=n(10),n(315),i=ds.require("cookie"),o="dsjspersist2",l={};try{a=JSON.parse(i(o))}catch(e){a={}}s=new r.Model(a),l.setCookie=function(){var e;e=JSON.stringify(s),i(o,e,{expires:3650})},s.on("change",function(){l.setCookie()}),["get","set","unset"].forEach(function(e){return l[e]=function(){return s[e].apply(s,arguments)}}),e.exports=l,ds.define("persist",function(){return l})},321:function(e,t,n){var r,o,i,a,s,l;r=n(2),i=n(3),o=n(11),l=n(5),a=n(9),s=n(225),n(218),ds.define("vimShortcuts",function(e){var t,n,c,u,d,f,h,p,g,m,v,y,b,w,_,k,x,T,C,S;return b=e("key"),y=-1,d=!1,w=!1,g=function(e){var t;return t=r(".shortcut_navigable:visible"),i.isUndefined(e)?t:e>-1?t.eq(e):r([])},k=function(e){return new o(function(t){var n,o,i;if(i=1===e?".pagination_next":".pagination_previous",n=r(i).eq(0),n.length&&!n.attr("disabled")&&!n.data("disable-autopage"))return w=!0,o=function(){w=!1,t()},a.once(s.PAGE_LOADING_FINISHED,o),n.get(0).click()})},v="shortcut_highlight",m=function(e){var t,n,o;y+=e,n=g(),y=Math.max(y,-1),y=Math.min(y,n.length),t=n.eq(y),l.raf(function(){return r("."+v).removeClass(v)}),o=e===-1&&-1===y,!o&&t.length?(l.raf(function(){return t.addClass(v).focus()}),l.centerOn(t)):k(e).then(function(){return 1===e?T():T(g().length),m(e)})},n=function(e){return e.click()},t=function(e){return e.get(0).click()},h=function(e,t){var n,r,o;return n=null!=(o=t.match(/\[data-(.+)\]/))?o[1]:void 0,r=e.data(n),r&&r!==!0&&(e=e.find(r)),e.eq(0)},c=function(e,t){var n;n=g(y).find(e),n=h(n,e),n.length&&t(n)},S=function(){return c("[data-checkable]",n)},p=function(){return c("[data-followable]",t)},x=function(e){var t,n;return null==e&&(e=!1),t=r("body"),n=!!e&&r(window).width()<t.width(),!d&&!n&&!t.hasClass("image_gallery_open")},_=function(e){var t,n;if(n="next"===e?".pagination_next":".pagination_previous",t=r(n).eq(0),t.length&&!t.attr("disabled"))return t.get(0).click()},T=function(e){return y="number"==typeof e?e:-1},C=function(){if(!w)return T()},f=function(){d=!1},u=function(){d=!0},a.on(s.PAGE_LOADING,u),a.on(s.PAGE_LOADING_FINISHED,C),a.on(s.PAGE_LOADING_FINISHED,f),b("j",function(){if(!d)return m(1)}),b("k",function(){if(!d)return m(-1)}),b("x",function(){if(!d)return S()}),b("o, enter",function(){if(!d)return p()}),b("left, h",function(){if(x(b.isPressed("left")))return _("prev")}),b("right, l",function(){if(x(b.isPressed("right")))return _("next")}),{enable:f,disable:u}})},338:function(e,t,n){"use strict";e.exports=function(){return new Promise(function(e){n.e(7,function(t){e(n(339))})})}},361:function(e,t,n){var r,o,i;r=n(2),o=n(3),i=n(25),ds.define("alerts",function(e){var t,n,a,s;return a=e("reactDialogs").makeReactDialog,s={},s._alertInterior=function(e){var t,n;return n="discogs_alert_message_eCTGqP16sn",t=r("#"+n),t.length||(r("body").append("<div id='"+n+"' />"),t=r("#"+n)),t.html(e)},s.alert=function(e,t){var n;return n=[{text:i.getText("Close")()}],t=r.extend(!0,{title:i.getText("Alert")(),content:e,buttons:n},t),a(t)},t={id:null,title:"",content:"",actions:null},n=o.template("<div class='inline-error <% if (actions) { %>inline-error-with-actions<% } %>'<% if (id) { %> id='<%= id %>'<% } %>'> <div class='inline-error-message'> <h5><i class='icon icon-times-circle icon-red'></i> <%= title %></h5> <p><%= content %></p> </div> <% if (actions) { %> <div class='inline-error-actions'><%= actions %></div> <% } %> </div>"),s.inlineError=function(e,i){var a,s,l,c;return null==i&&(i={}),i=o.defaults(i,t),a=r("body"),s=r(n(i)),c=e.offset(),a.append(s),l=function(e){r(e.target).closest(".inline-error").length||(s.length&&s.remove(),a.off("click.inlineError").off("keydown.inlineError").off("blur.inlineError","input, textarea, select, button"))},o.delay(function(){return a.on("click.inlineError",l).on("keydown.inlineError",l).on("blur.inlineError","input, textarea, select, button",function(e){return o.delay(function(){return l(e)},250)})},250),s.css({top:c.top+e.outerHeight(),left:c.left,minWidth:e.outerWidth()})},s})},364:function(e,t){ds.define("templates",function(e){var t,n,r,o,i;return i=e("$","_","ready"),t=i.$,n=i._,o=i.ready,r={init:function(){return n.extend(r,r.precompileTemplates())},precompileTemplates:function(){var e,r;return e={},r=/_template$/,t(".underscore_template").each(function(){var o,i;return o=n.str.camelize(this.id.replace(r,"")),i=n.template(t.trim(t(this).html())),e[o]=i}),e}},o(function(){return r.init()}),r})},366:function(e,t,n){var r;r=n(11),ds.define("youtubeIframeAPI",function(e){var t,n,o,i,a;return a=e("$","_"),t=a.$,n=a._,i={},o=void 0,i.load=function(){return o||(o=new r(function(e){var n;if("function"!=typeof window.onYouTubeIframeAPIReady)return window.onYouTubeIframeAPIReady=e,n=document.createElement("script"),n.async=1,n.src="https://www.youtube.com/iframe_api",t("head").append(n)}))},i.getPlayerState=function(e){var t;return t=void 0,n.find(YT.PlayerState,function(n,r){if(e.data===n)return t=r.toLowerCase(),!0}),t},i})},368:function(e,t,n){var r,o,i,a,s,l,c,u,d,f,h,p,g,m,v,y,b,w,_,k;h=n(7),r=n(2),u=n(3),o=n(10),p=n(306),_=n(5),n(369),w=ds.require("storage"),v={},g={"release collection":"release_id","release wantlist":"id","master release":"master_id","master shadowcat":"shadowcat"},m=function(){return new Promise(function(e){return n.e(11,function(t){return e(n(370))})})},b=h.seen_public_wantlist_invite,y=h.seen_public_collection_invite,i=o.Model.extend({initialize:function(e){var t,n,r,o,i,a;n=(null!=(o=e.collection)?o.length:void 0)>0,r=(null!=(i=e.wantlist)?i.length:void 0)>0,n&&(e.collection=e.collection.map(Number)),r&&(e.wantlist=e.wantlist.map(Number)),(this.is("release")||this.is("master release")||this.is("master shadowcat"))&&(n&&(t=f.add(u(e.collection).map(this.makeCollectionAttr()),{merge:!0,silent:!0}),this.set("collection",t,{silent:!0})),r&&(a=k.add(u(e.wantlist).map(this.makeWantlistAttr()),{merge:!0,silent:!0}),this.set("wantlist",a,{silent:!0})),f.on("add destroy change remove",this.syncCollection,this),k.on("add destroy change remove",this.syncWantlist,this)),d.on("change:menuVisible",this.hideMenu,this)},defaults:{collection:[],wantlist:[],inventory:[]},showPublicSettingsModal:function(e){return m().then(function(t){if(null==b&&"wantlist"===e&&(t.openSettingsModal("wantlist"),b=!0),null==y&&"collection"===e)return t.openSettingsModal("collection"),y=!0})},addTo:function(e){var t,n,r,o,i,a,s,l;return h.loggedIn?(s=this.get("objectId"),a=this.get("masterId"),l=this.get("shadowcat"),o={},t=v[e],i=this.getRelatedKey(t),o[i]=s,a&&(o.master_id=a),l&&(o.shadowcat=l),r=t.create(o),n="collection"===e?"collection_add":"wantlist_add",p.legacyTrack("release",n,h.endpoint),this.showPublicSettingsModal(e),r):(w.set("add-to-later",{property:e,id:this.get("id")}),void _.requireLogin())},removeFrom:function(e,t){var n,r,o;if(_.requireLogin())return t=t||this.get("objectId"),n=v[e],o=n.get(t),r=o.destroy(),r&&r.then(function(){var t;return t="collection"===e?"collection_remove":"wantlist_remove",p.legacyTrack("release",t,h.endpoint)}),r},getRelatedKey:function(e){var t,n;return n=this.get("objectType"),"release"===n&&(t=e===f?"collection":"wantlist",n=n+" "+t),g[n]},getRelatedModels:function(e){var t,n;return t=this.getRelatedKey(e),n={},n[t]=this.get("objectId"),e.where(n)},syncCollection:function(e){return this._setRelatedModels(e,"collection",f)},syncWantlist:function(e){return this._setRelatedModels(e,"wantlist",k)},_setRelatedModels:function(e,t,n){var r,o,i,a;if(o=this.get("objectId").toString(),r=this.getRelatedKey(n),a=null!=(i=e.get(r))?i.toString():void 0,a===o)return this.set(t,this.getRelatedModels(n))},makeCollectionAttr:function(){var e,t,n,r,o;return o=this.get("objectId"),r=this.get("masterId"),e=this.is("release"),t=this.getRelatedKey(f),n=function(n){var i;return i={id:n},i[t]=o,e&&r&&(i.master_id=r),i}},makeWantlistAttr:function(){var e,t,n,r,o;return r=this.get("objectId"),e=this.is("master release"),t=this.is("master shadowcat"),o=void 0,t&&(o=this.get("shadowcat")),n=function(n){var i;return i={id:n},e?i.master_id=r:t&&(i.shadowcat=o),i}},toggleAllWantlist:function(){var e,t,n;return _.requireLogin()&&(e=this.get("wantlist").length>0?"remove":"add",n=function(t){return function(n){var r;return"remove"===e?(k.remove(k.filter(function(e){return u.include(n.ids,e.get("id"))})),r=[]):(r=k.add(u(n.ids).map(t.makeWantlistAttr())),t.showPublicSettingsModal("wantlist")),t.set("wantlist",r),n}}(this),t=r.ajax({type:"POST",url:_.getUrl("/master/want_"+e),dataType:"json",data:{master_id:this.get("objectId")}}),t.then(n).then(function(t){var n,r,o;o=(null!=t?t:{ids:[]}).ids,n="add"===e?"wantlist_add_all":"wantlist_remove_all",r=null!=o?o.length:void 0,p.legacyTrack("release",n,h.endpoint,r)})),this},requestVersions:function(){return r.ajax({url:this.get("groupUrl")})},is:function(e){return this.get("objectType")===e}}),d=new(o.Collection.extend({model:i})),c=o.Model.extend({}),l=o.Collection.extend({model:c,url:_.getUrl("/_rest/wantlist")}),k=new l,s=o.Model.extend({}),a=o.Collection.extend({model:s,url:_.getUrl("/_rest/collection")}),f=new a,v.cards=d,v.wantlist=k,v.collection=f,v.CardModel=i,v.WantlistModel=c,v.CollectionModel=s,e.exports=v},369:function(e,t,n){"use strict";var r=void 0,o=n(12),i=o.hasLocalStorage,a=n(3);n(14);var s=ds.require("logError"),l=i();r=l?window.localStorage:{setItem:a.noop,getItem:a.noop,removeItem:a.noop,clear:a.noop,length:0,key:a.noop};var c=function(e){return"string"==typeof e?e:JSON.stringify(e)},u=function(e){if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e||void 0}},d={enabled:l,set:function(e,t){try{return r.setItem(e,c(t))}catch(e){return s}},get:function(e){return u(r.getItem(e))},remove:function(e){return r.removeItem(e)},clear:function(){return r.clear()},size:function(){return r.length},key:function(e){return r.key(e)},all:function(){var e={};return a.each(r,function(t,n){var o=r.key(n);return e[o]=d.get(o)}),e}};d.has=function(e){return e in r},e.exports=d,ds.define("storage",function(){return d})},371:function(e,t,n){var r,o,i,a,s;s=n(37),i=s.loadReactChunk,a=s.loadReactComponents,o=n(9),n(372),r=null,ds.define("reactDialogs",function(e){var t,n,s,l,c,u,d,f,h,p,g,m,v;return m=e("_","loadCSS","ready"),n=m._,u=m.loadCSS,g=m.ready,d=e("logError"),t=p=null,l=["components/react-modal.css"],f=function(e){return new Promise(function(n){var i,a;return i=r.createClass({displayName:"Dialog",propTypes:{content:r.PropTypes.string,component:r.PropTypes.element,className:r.PropTypes.string,title:r.PropTypes.string,buttons:r.PropTypes.array,width:r.PropTypes.oneOfType([r.PropTypes.number,r.PropTypes.string]),height:r.PropTypes.oneOfType([r.PropTypes.number,r.PropTypes.string]),maxHeight:r.PropTypes.oneOfType([r.PropTypes.number,r.PropTypes.string])},render:function(){var e;return e={id:this.props.id||"",className:this.props.dialogClass||"",title:this.props.title,buttons:this.props.buttons,width:this.props.width,height:this.props.height,maxHeight:this.props.maxHeight},r.createElement(t,Object.assign({},e),this.props.content&&r.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.content}}),this.props.component&&this.props.component)}}),a=r.createElement(i,Object.assign({},e)),e.open&&o.once(p.SHOW,e.open),e.close&&o.once(p.REMOVE,e.close),o.trigger(p.SHOW,{modal:a}),n(a)})},v=function(){return new Promise(function(r){return t=e("reactModals").Modal,p=e("modalEvents"),g(function(){return n.defer(r)})})},s=void 0,c=function(){return s||(s=function(){return u(l),i().then(function(e){return r=e.React,a().then(v)})}())},h=function(e){return c().then(function(){return f(e)}).catch(d)},{makeReactDialog:h}})},372:function(e,t,n){var r,o,i,a,s,l;s=n(7),r=n(2),o=n(11),l=s.sha,i=s.assetBasePath,a=s.assetsHost,ds.define("loadCSS",function(){var e,t,n;return n={},e=6e4,t=function(i){var a;return a=""+t.path()+i+"?"+l,n[a]||(n[a]=new o(function(t,n){var o,i;return i=function(){return t(o)},o=document.createElement("link"),o.type="text/css",o.rel="stylesheet",o.href=a,r(o).one("load",i),r("head").append(o),setTimeout(n,e),setTimeout(function(){var e,t;return e=r(document.createElement("img")),t=function(){return e.off("load error"),i()},e.one("load error",t),e.attr("src",a)},0)}))},t.path=function(){return""+a+i+"stylesheets/"},t})},373:function(e,t,n){var r,o;o=n(3),r=n(11),n(369),n(315),n(13),n(374),ds.define("onNextVisit",function(e){var t,n,i,a,s,l,c,u,d;return t=e("cookie"),c=e("ready"),u=e("storage"),i="onNextVisit",d=function(){return n.length?u.set(i,n):u.remove(i)},l=function(){u.enabled&&(n.push(o.toArray(arguments)),d())},a=l.pastMessages=[],n=l.futureMessages=[],s=function(){var n;return u.enabled&&u.has(i)&&(a.push.apply(a,u.get(i)),d()),t("on_next_visit")&&(a.push.apply(a,JSON.parse(t("on_next_visit"))),t.removeCookie("on_next_visit")),n=o.map(a,function(t){var n,r,o,i,a,s,l;for(a=t[0].split("."),n=t.slice(1),o=0,i=a.length;o<i;o++)s=a[o],l=l?l[s]:e(s);if(r=l)return c(function(){return r.apply(null,n)});throw new Error("Unable to process message: "+t.join(","))}),a.length=0,r.all(n)},l.process=s,s(),l})},374:function(e,t,n){var r,o;o=window.webpackRequire,r=window.webpackRequire=function(e){var t;if(t="function"==typeof o?o(e):void 0,"undefined"!=typeof t)return t;switch(e){case"buttons":return n(375);case"dsdata":return n(7);case"initialized":return n(305);case"start":return n(6);case"sections/subform/analytics":return n(376);case"util":return n(5);case"menu":return n(298);case"events":return n(9);case"features":return n(12);case"analytics/google":return n(306);case"google":return n(306);case"i18n":return n(25);case"models":return n(368);case"pageEvents":return n(225);case"analytics-property-storage-map":return n(377);case"ga-optimize":return n(380);case"consent":return n(307);case"cookie":return n(315);case"database/urls":return n(392);default:return}},e.exports=r},375:function(e,t,n){var r,o,i,a,s,l;r=n(2),l=n(5),a=n(9),i="dropdown:closeAll",o=r(".dropdown-button"),s=function(){return o.removeClass("dropdown-button-open")},o.on("click",".dropdown-toggle",function(e){var t,n,o,s,c;if(e.preventDefault(),t=r(this).parent(".dropdown-button"),c=!t.hasClass("dropdown-button-open"),n=e.clientX>window.screen.width/2,o=e.clientY>.6*window.screen.height,s=l.classSet({"dropdown-button-open-left":n,"dropdown-button-open-top":o}),a.trigger(i),c&&t.toggleClass("dropdown-button-open"),t.find(".dropdown-button-options").toggleClass(s,c),c)return setTimeout(function(){return r("body").one("click",function(){return a.trigger(i)})},200)}),a.on(i,s)},376:function(e,t,n){var r,o,i,a,s,l,c,u,d,f,h=[].slice;f=n(5),s=n(7),l=n(306),c=n(305),u=n(24).isProduction,o="subform",r="UA-36965964-4",a=null,d={},i=function(){var e,t,n,r,o,i,a,l,c,u,d;return e=s.locale,t=s.loggedIn,c=s.userNumSubmissions,a=s.userNumOrders,l=s.userNumPurchases,o=s.userNumApps,d=s.userUsesOfficialApp,i=s.userNumCollection,u=s.userNumWantlist,r=s.userID,n=s["subform/view:mode"],{uid:t?r:void 0,dimensions:[e,n],metrics:t?[c,a,l,o,d,i,u]:void 0}},d.clearInit=function(){return a=!1},d.handleInitialization=function(){var e;return e=u()&&!s.userIsAdmin,l.init().then(function(){return new l.AnalyticsProperty(r,o,{sampleRate:e?100:0})})},d.create=function(){return a||(a=c.then(d.handleInitialization))},d.setUserMetrics=function(e){var t,n,r,o;return r=null!=e?e:i(),o=r.uid,n=r.metrics,t=r.dimensions,d.create().then(function(e){return o&&e.set("&uid",o),e.setDimensions(t),e.setMetrics(n),e}).catch(function(){return 0})},d.createAndSetUserMetrics=function(){return d.create().then(function(){return d.setUserMetrics()}).catch(function(){return 0})},d.track=function(e,t,n,r){return d.create().then(function(o){return o.trackEvent(e,t,n,r)}).catch(function(){return 0})},d.trackPageView=function(){var e,t;return e=s["subform/view:mode"],t=document.title.split(":")[0],d.create().then(function(n){return n.trackPageView(e,t)}).catch(function(){return 0})},d.trackFocusStart=function(){return this.setState({startTime:(new Date).getTime()})},d.trackFocus=function(){var e,t,n;return t=f.getDuration(new Date(this.state.startTime)),e=this.props.dataPath.split("/"),n=e.filter(function(e){return!isFinite(e)}).join("-"),d.track("input focus time","focused",n,t)},d.trackLater=function(){var e,t,n;return t=arguments[0],e=2<=arguments.length?h.call(arguments,1):[],e.unshift("sections/subform/analytics."+t),n=ds.require("onNextVisit"),n.apply(null,e)},d.trackAbandonment=function(e,t,n){return d.create().then(function(r){return t&&d.setUserMetrics(t),r.trackEvent("input","abandoned",e,n,!0)}).catch(function(){return 0})},d.trackAbandonmentOnNextVisit=function(e){return d.trackLater("trackAbandonment",e,i(),f.getDuration())},e.exports=d},377:function(e,t,n){e.exports={resolve:function(e){switch(e){case"messages":return n.e(12,function(e){return n(378).sendEvents()});default:return}}}},380:function(e,t,n){var r,o,i;i=n(381),r=n(389).enableAjaxCartExperiment,e.exports=o={},o.passwordStrengthMeter=function(){return i.revealMeter()},o.passwordStrengthMeterEagerTooltip=function(){return i.revealMeter(!0)},o.enableAjaxAddToCart=function(){return r()}},381:function(e,t,n){var r,o,i,a,s,l,c,u,d,f,h,p,g,m,v,y,b,w,_,k,x,T;n(373),r=n(2),o=n(11),c=n(25).getText,v=ds.require("ready"),m=ds.require("onNextVisit"),T=null,d=function(){return T||(T=new o(function(e){return n.e(13,function(){var t;return t=n(382),e(t)})}))},h=!1,k=!1,w=[c("Very Weak")(),c("Weak")(),c("Okay")(),c("Good")(),c("Great!")()],p="hide-password-strength-meter",y="display-password-strength-meter",f="<ol class='password-strength-meter password-strength-meter-markup needs_tooltip' data-html='true' data-placement='auto'> <li class='strength-bar strength-bar-4'></li> <li class='strength-bar strength-bar-3'></li> <li class='strength-bar strength-bar-2'></li> <li class='strength-bar strength-bar-1'></li> </ol>",x='<div class="tooltip multi-line-tooltip password-strength-tooltip" role="tooltip"> <div class="tooltip-arrow"></div> <div class="tooltip-inner"></div> </div>',s=function(){var e;return e=r(f),e.tooltip({title:l(0),template:x,delay:150}),e},a=function(e){return function(t){var n;if(n=t.score,_(e,n),e.attr("data-original-title",l(n)),e.tooltip("fixTitle"),k)return e.tooltip("show")}},_=function(e,t){var n,r,o,i;for(i="",r=o=0;o<=5;r=++o)r!==t&&(i+=" strength-"+r);return e.removeClass(i),n="strength-"+t,e.addClass(n)},l=function(e){var t;return t=w[e],"<p>"+c("Password strength:")()+" <strong>"+t+"</strong></p>\n<p>"+c("Choose a mix of unique words and phrases. Avoid using the same password across multiple sites. Your password must be at least 8 characters.")()+"</p>"},i=function(e,t){var n;return n=e.closest("form"),n.find(":input").focus(d),e.on("input change",function(){return d().then(function(n){var r,o;return r=e.val(),o=n(r),t(o)})}),n.on("submit",function(){return d().then(function(t){var n,r,o,i;return n=e.val(),i=t(n),h||(r="not "),o="meter "+r+"displayed",m("google.legacyTrack","password-strength","password chosen on "+window.location.pathname,o,""+i.score)})})},u=function(){var e,t,n;return g(),t=r(".add-strength-meter").find("[type=password]"),e=s(),n=a(e),e.tooltip({title:l(0),template:x,delay:150}),i(t,n),t.after(e)},b=function(e){var t,n,o;if(null==e&&(e=!1),k=e,h=!0,t=r(".add-strength-meter"),t.removeClass(p),t.addClass(y),n=t.find(".password-strength-meter"),e)return o=t.find("input[type=password]"),o.focus(function(){return n.tooltip("show")}),o.blur(function(){return n.tooltip("hide")})},g=function(){var e;return h=!1,e=r(".add-strength-meter"),e.addClass(p),e.removeClass(y)},e.exports={bindToPasswordField:i,defaultMarkupBasedMeterElement:s,defaultCallback:a,revealMeter:b},v(u)},389:function(e,t,n){var r,o,i,a,s,l,c,u,d,f,h,p,g,m,v,y,b,w,_,k,x,T,C,S;n(373),n(13),r=n(2),o=n(3),f=n(7),x=n(390),g=n(5).getUrl,p=n(25).getText,w=ds.require("onNextVisit"),_=ds.require("ready"),l=ds.require("alertMessage"),k=n(391),T=k.showConfirmModal,u=k.buttonNeedsConfirmation,s=void 0,a=!1,C=function(e){var t,n,o,i;return t=r(e),n=t.data("in-cart"),f.loggedIn?n?void 0:(o=t.data("item-has-shipping"),i=o?"has shipping":"no shipping",w("google.legacyTrack","item","Added to Cart",i),t.data("in-cart",!0)):w("google.legacyTrack","Optimistic Action","Clicked Added to Cart button")},d=function(e){var t;u(e.target)?T(e).catch(o.noop):(C(e.target),a&&f.loggedIn&&(e.preventDefault(),t=r(this),s&&s.close(),t.html("<i class='icon icon-spinner icon-spin'></i>"),i(t)))},i=function(e){var t;return t=e.data("item-id"),r.ajax({dataType:"json",type:"POST",headers:{Authorization:f.authorization},contentType:"application/json",url:f.addToCartUrl,data:JSON.stringify({item_id:t}),success:function(t){return v(t,e)},error:m})},m=function(e){var t,n;return t=null!=(n=e.responseJSON)?n.message:void 0,s=l({type:"error",message:t,closable:!0,autoClose:!0,isFixed:!0}),r(document).on("pjax:timeout",y),r.pjax.reload("#pjax_container",{timeout:5e3}).then(function(){return r(document).off("pjax:timeout",y)})},v=function(e,t){var n,o,i,a;if(o=new Number(r("#cart_items_total").html()||0),a=t.data("seller-id"),i=t.data("item-has-shipping"),n=g("/sell/cart#cart-order-"+a),x(o+1),t.html("<i class='icon icon-check'></i>"+p("In Cart")()).removeClass("button-green cart_button").attr("href",n),s=l({type:"accept",message:e+" <a href='"+n+"'>View cart and checkout</a>.",closable:!0,autoClose:!0,isFixed:!0}),i)return r(document).on("pjax:timeout",y),r.pjax.reload("#pjax_container",{timeout:5e3}).then(function(){return r(document).off("pjax:timeout",y)})},y=function(e){return e.preventDefault(),window.location.href=g("/sell/cart")},h=function(){return a=!0},c=function(){return r("body").on("click",".cart_button",d)},S=function(){return r("body").off("click",".cart_button",d)},b=function(){return c(),r(document).on("pjax:end",function(){return S(),c()})},e.exports={cartButton:_(b),enableAjaxCartExperiment:h}},390:function(e,t,n){var r,o;r=n(2),o=function(e){var t,n,o,i;n='<i class="icon icon-shopping-cart"></i>',e=Math.max(e,0),e&&(n+="&nbsp;<span id='cart_items_total' class='activity_menu_total'>"+e+"</span>"),t=r("#cart_link").html(n).toggleClass("accent",!!e),i=t.attr("title")||t.data("originalTitle"),i=""+e+i.match(/\d*(.+)/)[1],null!=(o=t.attr("aria-label",i).attr("title",i).data("tooltip"))&&o.fixTitle()},e.exports=o},391:function(e,t,n){var r,o,i,a,s,l,c,u,d,f,h,p,g,m,v,y,b,w,_;s=n(3),i=n(11),p=n(7),r=n(2),_=n(5),g=n(306),n(369),b=ds.require("storage"),f=".confirm-add-to-cart, .confirm-make-offer",m=function(e){return r(e).is(f)},c=function(e){var t,n,o;return t=r(e),n=t.data("item-id"),o=m(t)&&d()&&!u(n)},a=p.username?"hide-confirm-add-to-cart-"+p.username:"hide-confirm-add-to-cart",o={ADD_TO_CART:"add to cart",MAKE_OFFER:"make offer"},h=[],u=function(e){return s(h).contains(e)},v=function(e){return h.push(e)},d=function(){return b.get(a)!==!0},w=function(e,t,n){return g.legacyTrack("Marketplace Item Grading Warning",e,t,n)},y=function(e){var t,n,a,s;return s=e.target,t=r(s),a=t.closest(".confirm-make-offer").length>=1?o.MAKE_OFFER:o.ADD_TO_CART,n=t.data("item-id"),n?(e.preventDefault(),l(s,n,a)):i.resolve()},l=function(e,t,n){var l,c,u,d,f,h,p,g,m,y,k,x,T,C,S,A,E;return d=!1,A="cart-link-confirm-template-"+t,h=_.classSet({"confirm-mode-add-to-cart":n===o.ADD_TO_CART,"confirm-mode-make-offer":n===o.MAKE_OFFER}),m=function(){return w("accepted",n),d&&b.set(a,!0),v(t),C(),g(),e.click()},l=function(){return w("cancelled",n),C(),g(),i.reject()},c=function(e){return d=e.target.checked,w("Checkbox clicked",d,n)},f=function(){return r("body").on("change","#hide-confirm-add-to-cart-field",c)},C=function(){return r("body").off("change","#hide-confirm-add-to-cart-field",c)},g=function(){var e;return null!=(e=window.soundManager)?e.pauseAll():void 0},u=function(e){return s.template(r.trim(r("#"+e).html()))},S=u(A),x=S({modeClass:h}),E=u("cart-link-confirm-title-template-"+t),T=E(),p=u("cart-link-confirm-button-template-"+t),k=p({mode:n}),f(),g(),y=_.confirm(x,{title:T,okayButtonText:k}),w("shown",n),y.then(m,l)},e.exports={buttonNeedsConfirmation:c,showConfirmModal:y}},392:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTrackUrl=t.getCompositionUrl=t.getLabelUrl=t.getArtistUrl=t.getMasterUrl=t.getReleaseUrl=t.getEntityUrl=void 0;var r=n(7),o=n(3),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.locale;return e&&"en"!=e?"/"+e:""},a=t.getEntityUrl=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.slug,o=n.subPath,a=n.locale,s=i(a),l=r?"-"+r:"",c=o?"/"+o:"";return s+"/"+e+"/"+t+l+c},s=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.slug,a=n.locale,s=void 0===a?r.locale:a,l=i(s),c=o?"/"+o:"";return""+l+c+"/"+e+"/"+t};t.getReleaseUrl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.title,r=t.subPath,i=t.locale,l=r?a:s;return l("release",e,{locale:i,slug:(0,o.slugify)(n),subPath:r})},t.getMasterUrl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.title,r=t.subPath,i=t.locale,l=r?a:s;return l("master",e,{locale:i,slug:(0,o.slugify)(n),subPath:r})},t.getArtistUrl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.name,r=t.subPath,i=t.locale;return a("artist",e,{slug:(0,o.slugify)(n),subPath:r,locale:i})},t.getLabelUrl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.name,r=t.subPath,i=t.locale;return a("label",e,{slug:(0,o.slugify)(n),subPath:r,locale:i})},t.getCompositionUrl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.title,r=t.subPath,i=t.locale;return a("composition",e,{slug:(0,o.slugify)(n),subPath:r,locale:i})},t.getTrackUrl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.title,r=t.subPath,i=t.locale;return a("track",e,{slug:(0,o.slugify)(n),subPath:r,locale:i})}},393:function(e,t,n){var r,o,i,a,s,l,c,u,d,f,h,p,g,m,v,y,b,w,_,k,x;r=n(2),l=n(3),s=n(11),i=n(10),f=n(7),g=n(12).isMobile,b=n(368),o=n(298).ActionMenuView,p=n(306),_=n(13),k=ds.require("skittles"),x=ds.require("tooltip"),w={},u=b.cards,w.views=[],w.init=function(){var e,t;t=void 0,e=r(window),e.off("pjax:end cards:updated",w.init),l(w.views).invoke("teardown"),w.views.length=0,v(h()),(t=f.pageObject)&&u.add(new u.model(t),{at:0}),e.on("pjax:end cards:updated",w.init)},d=".card, .r_tr",c=function(e,t,n){
this.model[e](t),n.preventDefault()},h=function(e){var t;return null==e&&(e=document.body),t=r(e),t.find(d).not(".react-card")},w.renderCardModelState=function(e,t,n){var r,o;return o=l.keys(t.changed)[0],r=e.find(".skittle_"+o),k.updateSkittle(r,k._makeData(n.length,o)),e.toggleClass("card_in_"+o,!!n.length),"collection"===o&&e.toggleClass("card_multiple_in_collection",n.length>1),e},y=function(e){var t;return t=l.pick(e.data(),"id","objectType","objectId","collection","wantlist","inventory","masterId","shadowcat","groupUrl","parentGroupUrl")},m=function(e){var t;return t=u.get(e.data("id")),new a({el:e.get(0),model:t})},v=function(e,t){var n,o,i,a,s,c;return n=l(l(e.toArray()).map(r)),t?(s=u.indexOf(t.model),c=l.indexOf(w.views,t),o=[c,0],u.add(n.map(y),{index:s}),i=n.map(m),o.push.apply(o,i),w.views.splice.apply(w.views,o)):(u.reset(n.map(y)),i=n.map(m),w.views.push.apply(w.views,i)),a=t?t.model.get("objectId"):void 0,r(window).trigger("cards:initialized",a),i},a=i.View.extend({_events:{"click .add_to_collection":"addToCollection","click .add_to_wantlist":"addToWantlist","click .remove_from_wantlist":"removeFromWantlist","click .remove_from_collection":"removeFromCollection"},initialize:function(){this.listenTo(this.model,"change:wantlist change:collection change:inventory",this.render,this),this.model.get("groupUrl")&&this.$el.find(".mr_toggler").onFastClick(l.bind(this.toggleVersionsHandler,this)),g?(this.delayedInit(),this.versionsVisible=!1):this.$el.one("mouseenter",l.bind(this.delayedInit,this)).on("mouseenter",l.bind(this.setHover,this))},delayedInit:function(){this.menuView=new o({el:this.$el.find(".action_menu"),$toggleEl:this.$el.find(".action_menu_toggler")}),this.delegateEvents(this._events),g||this.$el.on("mouseleave",l.bind(this.unsetHover,this))},render:function(e,t){return w.renderCardModelState(this.$el,e,t),this},teardown:function(){this.stopListening(),this.undelegateEvents(),this.menuView&&this.menuView.teardown()},addToCollection:l.partial(c,"addTo","collection"),addToWantlist:l.partial(c,"addTo","wantlist"),removeFromWantlist:l.partial(c,"removeFrom","wantlist"),removeFromCollection:function(e){var t;t=this.model.get("collection"),1===t.length&&this.model.removeFrom("collection",t[0].get("id")),e.preventDefault()},renderHover:function(e){this.$el.toggleClass("card_hover",e)},unsetHover:function(){this.renderHover(!1)},setHover:function(){this.renderHover(!0)},toggleVersionsHandler:function(e){e.preventDefault(),this.toggleVersions()},toggleVersions:function(e){var t,n,r,o,i;return r=function(){t.removeClass("icon-spin icon-spinner").toggleClass("icon-caret-left",!e).toggleClass("icon-caret-down",e)},n=function(){t.removeClass("icon-caret-left icon-caret-down").addClass("icon-spinner icon-spin")},e=this.versionsVisible=l.isUndefined(e)?!this.versionsVisible:e,t=this.$el.find(".mr_toggler .icon"),r(),o=l.delay(n,500),i=this.getVersionCards().then(function(t){return r(),clearTimeout(o),l.first(t).$el.toggleClass("sub_first",e),l.last(t).$el.toggleClass("sub_last",e),l.invoke(t,"toggle",e),t}),i.then(function(){return p.legacyTrack("master release","versions toggled",e?"open":"close")}),i},toggle:function(e){this.$el.toggleClass("hidden",!e)},getVersionCards:function(){var e,t,n,o,i,a;return t=function(t){var n;return n=h(r("<div />").html(t)),e.after(n),x.setup(n),v(n,a)},a=this,n=this.model,e=this.$el,o={parentGroupUrl:n.get("groupUrl")},b=l(u.where(o)).without(n),i=l.filter(w.views,function(e){return l.include(b,e.model)}),s.resolve(i.length?i:this.model.requestVersions().then(t))}}),w.CardView=a,l.extend(w,i.Events),_(function(){return w.init()}),e.exports=w},400:function(e,t,n){var r,o,i,a,s;o=n(307),i=n(305),a=n(401).default,r=n(11),s=n(3).noop,ds.define("appNexus",function(e){var t,n,l;return t=e("$"),n=r.all([o.init(),i,a()]),n.then(function(){var e;return e=t("<img src='https://b1img.com/78ab893f886b4d93b0a19595ae311122/uni_tag'>"),e.appendTo(document.body)}).catch(s),l=function(e,r){return n.then(function(){var n;return n=t("<img src='https://b1img.com/78ab893f886b4d93b0a19595ae311122/con_tag?order_id="+e+"&value="+r+"'>"),n.appendTo(document.body)})},{trackConversion:l}})},401:function(e,t,n){"use strict";function r(){return i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(11),i=new o(function(e){return window.addEventListener("load",function(t){return e(t)})})},403:function(e,t,n){var r,o,i,a,s,l,c,u,d,f,h,p;r=n(2),i=n(3),p=void 0,d=function(){return p=s({top:0,left:0,bottom:Math.max(document.documentElement.clientHeight,window.innerHeight,0),right:Math.max(document.documentElement.clientWidth,window.innerWidth,0)},200)},s=function(e,t){return{top:e.top-t,left:e.left-t,bottom:e.bottom+t,right:e.right+t}},l=function(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top},a=function(e){return l(e.getBoundingClientRect(),p)},c=function(e){var t;if(e&&(t=r(e).data("src"),e.src!==t&&a(e)))return e.src=t},u=function(e){var t,n,r,o,i;for(null==e&&(e=document.body),r=e.querySelectorAll(".thumbnail-lazyload img"),i=[],t=0,o=r.length;t<o;t++)n=r[t],i.push(c(n));return i},h=function(){u()},d(),u(),f=1e3/15,o=r(window),o.on("resize orientationchange",i.throttle(d,f)),o.on("scroll resize pjax:end",i.throttle(h,f)),e.exports=u},405:function(e,t,n){var r,o,i,a,s,l,c,u,d,f,h,p,g,m,v;s=n(3),l=n(9),n(13),n(369),d=ds.require("ready"),p=ds.require("storage"),a="dsWatcherData",v=p.get(a)||[],i={START:"watcher:start",UPDATE:"watcher:update",REMOVE:"watcher:remove"},r={start:function(e){return l.trigger(i.START,e)},update:function(e){return l.trigger(i.UPDATE,e)},remove:function(e){return l.trigger(i.REMOVE,e)}},o=[],g=function(e){return v.push(e),p.set(a,v)},u=function(e){var t;return t=function(){switch(e.component){case"tutorial":return new Promise(function(e){return n.e(16,function(t){return e(n(406))})});default:return Promise.reject("No watched component of the name '"+e.component+"' is registered.")}}(),t.then(function(t){return o.push(e.component),t.init(e.data)})},h=function(e){if(e.triggerWhenPathMatches||(e.triggerWhenPathMatches=window.location.pathname),s.findWhere(v,{component:e.component})?m(e):g(e),o.indexOf(e.component)===-1)return u(e)},m=function(e){return v=s.reject(v,function(t){return t.component===e.component}),g(e)},f=function(e){return v=s.reject(v,function(t){return t.component===e}),o=s.pluck(v,"component"),p.set(a,v)},c=function(){return s.map(v,function(e){if(window.location.pathname.indexOf(e.triggerWhenPathMatches)>-1)return u(e)}),l.on(i.START,h),l.on(i.UPDATE,m),l.on(i.REMOVE,f)},d(c),e.exports=r},407:function(e,t,n){var r,o,i;i=n(7),o=n(3),r=n(11),ds.define("load",function(e){var t,n,a,s,l,c,u,d,f,h,p,g;return h=e("ready"),u={},f={},n=null,p=i.sha,a=i.assetBasePath,s=i.assetsHost,s||(s="/"),g=function(){return n||(n=new r(function(e){var t,n,o,i,a;for(i=document.getElementsByTagName("script"),t=0,n=i.length;t<n;t++)o=i[t],a=""+o.getAttribute("src"),"null"!==a&&a.match(""+s)&&(a=a.split("?")[0]+"?"+p,u[a]=r.resolve(a));return e()}))},h(g),d=function(){return""+s+a+"javascripts/"},l=".js",t=function(e){return new r(function(t){var n;return n=document.createElement("script"),n.src=e,n.onload=function(){return t(e)},n.setAttribute("async","async"),document.head.appendChild(n)})},c=function(e){var n;return n=""+f.load.path()+e+l+"?"+p,u[n]||(u[n]=t(n))},f.load=function(e){return e=o.isArray(e)?e:[e],g().then(function(){return r.all(e.map(c))})},f.load.path=d,f.load})},413:function(e,t,n){var r,o;o=n(13),r=function(){return n.e(19,function(){var e;return e=n(414),e.init()})},o(function(){var e;if(e=document.getElementsByClassName("discogs-chart"),e.length>0)return r()}),e.exports=r},421:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){return n.e(20,function(){var e=n(422),t=e.init;return t(f)})}function i(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return n.e(21,function(){var t=n(423),r=t.init;return r(e)})}function a(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n.e(22,function(){var r=n(424),o=r.init,i=r.reset;return t&&i(),o(h,e)})}function s(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];c.default.loggedIn?e&&(p=!1,g(t)):["artist.tracks","tracks.composition"].indexOf(c.default.endpoint)>=0||c.default.isHomePage?(0,d.default)().then(g):g(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.init=s;var l=n(7),c=r(l),u=n(401),d=r(u),f="bands-in-town-ad-container",h="ad_container",p=!0,g=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];i(e),(document.getElementsByClassName(h)||[]).length&&a(p,e),(document.getElementsByClassName(f)||[]).length&&o()}},447:function(e,t){ds.define("images",function(e){var t,n,r,o,i;return t=e("$"),i=e("ready"),o={},n={size:"small",orientation:"portrait"},o.make$thumbnail=function(e,o,i,a){var s,l;return s=t(document.createElement(o?"a":"div")),i=i||n.size,a=a||n.orientation,l=["thumbnail_link","thumbnail_size_"+i,"thumbnail_orientation_"+a],o&&s.attr("href",o),s.addClass(l.join(" ")).html("<span class='thumbnail_border'></span><span class='thumbnail_center'><img src='"+e+"' /></span></span>").find("img").on("load.set_orientation",r(s)),s},r=function(e){return function(){var n,r;n=t(this),r=n.width()>n.height(),e.toggleClass("thumbnail_orientation_portrait",!r).toggleClass("thumbnail_orientation_landscape",r),n.off("load.set_orientation")}},o.fixOrientation=function(e){var n;return n=e&&e.length?e.find(".thumbnail_orientation_auto"):t(".thumbnail_orientation_auto"),n.each(function(){return t(this).find("img").on("load.set_orientation",r(t(this)))})},o.init=function(){return o.fixOrientation()},i(function(){return o.init()}),o})},448:function(e,t,n){var r,o,i=function(e,t){return function(){return e.apply(t,arguments)}};r=n(9),o=n(306),ds.define("imageGallery",function(e){var t,n,a,s,l,c,u,d,f,h;return h=e("$","_","ready","layout","key"),t=h.$,s=h._,f=h.ready,u=h.layout,c=h.key,a=e("LoadQueue"),l=!1,d={},n=function(){function e(e){this.update=i(this.update,this),this.$gallery=e,this.imagesData=this.$gallery.data("images"),this.$gallery.length&&this.imagesData&&this.imagesData.length&&this.setup()}return e.prototype.setup=function(){var e;return e=location.hash.replace("#","").split("/"),e&&"images"===e[0]&&(e[1]&&s.where(this.imagesData,{id:e[1]}).length?l?this.scrollToSlide(e[1]):this.goToSlide(e[1]):this.open()),this.$gallery.data("updateImageData",this.update),this.$gallery.on("click",s.bind(this.clickGallery,this))},e.prototype.open=function(){return this.$modal||this.create(),o.legacyTrack("imageGallery","open"),t("body").addClass("image_gallery_open"),this.$modal.show(),r.trigger("imageGallery:open"),c("right, left","imageGallery",s.bind(this.keyNav,this)),c("esc","imageGallery",s.bind(this.close,this)),c.setScope("imageGallery")},e.prototype.close=function(e){var n,i;if(i="img, .image_gallery_thumb, .image_gallery_nav, .images_edit, .image_zoom, .image_copy_permalink, .image_copy_permalink_text",!(null==this.$modal||e&&t(e.target).closest(i).length&&!l||t(e.target).closest("a").hasClass("images_edit")))return o.legacyTrack("imageGallery","close"),n=function(){return t("body").removeClass("image_gallery_open")},setTimeout(n,50),this.$modal.hide(),r.trigger("imageGallery:close"),c.unbind("right","imageGallery"),c.unbind("left","imageGallery"),c.unbind("esc","imageGallery"),c.setScope("all"),e.preventDefault()},e.prototype.makeModal=function(){return this.$modal=t(s.template(t("#image_gallery_modal_tpl").html())({images:this.imagesData,editUrl:this.$gallery.data("edit-url")})),this.$modal.appendTo("body"),this.$modal.onFastClick(s.bind(this.close,this))},e.prototype.create=function(){return this.makeModal(),l?t(window).on("breakpoints>mobile",this.setupSlideshow):this.setupSlideshow()},e.prototype.update=function(e){var t;if(this.imagesData=e,null!=(t=this.$modal)?t.length:void 0)return this.$modal.remove(),this.$modal=null},e.prototype.setupSlideshow=function(){var e;return this.$slideWrapper=this.$modal.find(".image_gallery_slide_wrapper"),this.$galleryNav=this.$modal.find(".image_gallery_nav"),this.loadQueue=new a(this.$modal.find(".image_gallery_slide img").toArray()),this.loadQueue.loadNext(2),e=this.$modal.find(".image_gallery_thumb"),e.on("click",s.bind(this.clickThumb,this)),e.first().trigger("click"),this.$modal.find(".image_gallery_nav").on("click",s.bind(this.clickNav,this)),this.$modal.on("click",".image_gallery_slide img",s.bind(this.zoomImg,this)).on("click",".image_zoom",s.bind(this.zoomImg,this)).on("click",".image_copy_permalink",s.bind(this.clickPermalink,this)).on("click",".image_copy_permalink_text",s.bind(this.updatePermalink,this)),r.on(this.loadQueue.events.loaded,s.bind(this.imageDoneLoading,this)),r.on(this.loadQueue.events.failed,s.bind(this.imageFailedLoading,this)),r.on(this.loadQueue.events.allLoaded,function(e){return function(){return r.off(e.loadQueue.events.loaded,null,e),r.off(e.loadQueue.events.failed,null,e),r.off(e.loadQueue.events.allLoaded,null,e)}}(this))},e.prototype.goToSlide=function(e){var n,r,o,i,a,s;return null!=this.$modal&&this.$modal.is(":visible")||this.open(),n=this.$modal.find(".image_gallery_slide[data-id='"+e+"']"),this.$slideWrapper.css({left:100*-n.index()+"%"}),r=this.$modal.find(".image_gallery_thumb[data-id='"+e+"']"),a=r.position().left,s=156,r.addClass("current"),r.siblings(".current").removeClass("current"),(a>t(window).width()-s||a<0)&&r.parent().animate({scrollLeft:r.index()*s},250),this.$galleryNav.show(),o=null,r.is(":first-child")?o=1===this.imagesData.length?".image_gallery_prev, .image_gallery_next":".image_gallery_prev":r.is(":last-child")&&(o=".image_gallery_next"),o&&this.$galleryNav.filter(o).hide(),this.loadQueue.loadAtIndex(n.index()),this.loadQueue.loadAtIndex(null!=(i=n.next())?i.index():void 0)},e.prototype.scrollToSlide=function(e){return null!=this.$modal&&this.$modal.is(":visible")||this.open(),s.delay(function(t){return function(){return t.$modal.animate({scrollTop:t.$modal.find(".image_gallery_slide[data-id='"+e+"']").offset().top-14},200)}}(this),20)},e.prototype.imageDoneLoading=function(e){var n,r;return n=t(e),r=n.attr("data-src"),n.attr("src",r).removeAttr("style").addClass("loaded").removeClass("preview")},e.prototype.imageFailedLoading=function(){},e.prototype.clickGallery=function(e){return e.preventDefault(),this.open()},e.prototype.clickThumb=function(e){var n;return e.preventDefault(),n=t(e.target).closest(".image_gallery_thumb"),this.goToSlide(n.data("id"))},e.prototype.clickNav=function(e){var n;return e.preventDefault(),n=t(e.target).closest(".image_gallery_nav"),this.doNav(n.hasClass("image_gallery_next")?"next":"prev")},e.prototype.keyNav=function(){return this.doNav(c.isPressed("right")?"next":"prev")},e.prototype.doNav=function(e){var t;return t=this.$modal.find(".image_gallery_thumb.current")[e](),t.length||(t=this.$modal.find(".image_gallery_thumb")["next"===e?"first":"last"]()),t.trigger("click")},e.prototype.zoomImg=function(e){return e.preventDefault(),this.$modal.toggleClass("image_zoomed"),o.legacyTrack("imageGallery","zoomImg")},e.prototype.getPermalink=function(){return""+location.origin+(this.$gallery.data("permalink-url")||location.pathname)+"#images/"+this.$modal.find(".image_gallery_thumb.current").data("id")},e.prototype.clickPermalink=function(e){var n,r;return e.preventDefault(),r=this.getPermalink(),n=t(e.target).closest(".image_copy_permalink"),n.hide(),n.next(".image_copy_permalink_text").show().val(r).trigger("select"),o.legacyTrack("imageGallery","clickPermalink")},e.prototype.updatePermalink=function(e){var n;return e.preventDefault(),n=this.getPermalink(),t(e.target).closest(".image_copy_permalink_text").val(n).trigger("select")},e.prototype.removeGallery=function(){if(this.$modal)return this.$modal.remove()},e}(),d.initGallery=function(e){var r;return r=t(e),new n(r)},d.init=function(){return l="mobile"===u.mode(),s.each(t(".image_gallery"),d.initGallery)},f(d.init),d})},788:function(e,t,n){var r;r=n(3),e.exports={create:function(e,t,n,o){var i,a,s;i=function(){var e;return e=n.val(),r.has(o,e)?o[e].toFixed(2):""},a=function(){var t,n;n=i(),t=e.find(".value"),e.toggle(!!n.length),t.html(n)},s=function(e){t.val(i()).trigger("change"),e.preventDefault()},n.on("change",a),e.on("click",s)}}},808:function(e,t,n){"use strict";var r=n(2),o=n(3),i=n(13),a={init:function(){var e=r(".countable");return o.each(e,this.initInput,this)},initInput:function(e,t){var n=r(e);if(n.data("input-counter"))return!1;var i=this.addCounterSpan(n,t);n.data("inputCounter",!0),n.on("keyup keydown reset",o.bind(this.renderCounter,this,n,i)),this.renderCounter(n,i)},addCounterSpan:function(e,t){var n="input_counter_"+(e.attr("id")||t),o=r('<span id="'+n+'" class="input_counter" style="margin: 5px 5px;" />');return e.after(o),o},getCounterText:function(e){var t=e.attr("maxlength"),n=t?"/"+t:"";return e.val().length+n},renderCounter:function(e,t){t.text(this.getCounterText(e))}};i(function(){return a.init()}),e.exports=a,ds.define("inputCounter",function(){return a})},813:function(e,t){ds.define("skittles",function(e){var t,n,r,o;return o=e("$","_"),t=o.$,n=o._,r={},r.types=["collection","inventory","wantlist"],r.iconMap={collection:"collection",wantlist:"wantlist",inventory:"store"},r._makeData=function(e,t){var r,o;return r=n.isArray(e)?e.length:e,o=r+" in "+n.str.capitalize(t),{name:t,title:o,count:r}},r.makeData=function(e){return n(r.types).map(function(t){var n;return n=(null!=e?e[t]:void 0)||0,r._makeData(n,t)})},r.updateStatus=function(e,t){n(t).chain().pick(r.types).each(function(t,n){var o;return o=e.find(".skittle_"+n),r.updateSkittle(o,r._makeData(t,n))})},r.updateSkittle=function(e,t){var n;return e.attr("aria-label",t.title).attr("title",t.title),n=e.data("tooltip"),null!=n&&n.fixTitle(),e.toggle(!!t.count).find(".count").text(t.count),e},r.render=function(e){var t;return t="",t+=n(r.makeData(e)).map(r.skittleTemplate).join(""),t?"<span class='skittles'>"+t+"</span>":t},r.skittleTemplate=function(e){var t,n,o;return null==e&&(e={}),n="",o=e.name,t=e.count,o&&"number"==typeof t&&(n+="<span class='skittle skittle_"+o+" needs_delegated_tooltip' "+(0===t?" style='display: none;'":"")+" data-title='"+e.title+"' title='"+e.title+"' aria-label='"+e.title+"' ><i class='icon icon-"+r.iconMap[o]+"'></i><span class='count'>"+t+"</span></span>"),n},r.updateMasterRowSkittles=function(e){var n,o,i,a,s;o=e.closest("tr"),a=o.attr("class").match(/m(\d+)/),a&&(s=a[0],n=t(".master."+s),n.length&&(i=r.makeMasterSkittleData(s),r.updateStatus(n.find(".skittles"),i)))},r.makeMasterSkittleData=function(e){var o,i,a;return i={},a=function(e,r){return n.sum.apply(null,e.find(".skittle_"+r+" .count").map(function(){return 1*t(this).text()}))},o=t(".sub."+e),0===o.length&&(o=t(".version_"+e)),o.length&&n(r.types).each(function(e){return i[e]=a(o,e)}),i},r})},819:function(e,t,n){var r,o,i,a,s,l,c,u,d;i=n(7),r=n(2),o=n(3),d=n(5),u=n(25),s=u.getText,c=u.ngetText,a=n(9),l=n(306),n(304),n(13),ds.define("rating",function(e){var t,n,u;return t=e("layout"),u=e("ready"),n={init:function(){return this.DEFAULTS={min:1,max:5,resettable:!0,readOnly:!1,preset:0},this.rangeClass="rating_range",this.iconsClass="rating_icons",this.resetHtml="<i class='reset icon icon-times' tabindex='0' aria-label='"+s("Remove rating")()+"' data-value='0'></i>",r(".rating").each(o.bind(this.initRating,this))},initRating:function(e,t){var n;t=r(t),t.data("initialized")||(n=this.getOptions(t),t.data("options",n),t.data("initialized",!0),this.addIcons(t,n.max,n.resettable),n.readOnly||this.bindEvents(t,n),this.setValue(t,n.value,!0))},getOptions:function(e){return o.extend(o.clone(this.DEFAULTS),e.data())},addIcons:function(e,t,n){var r,i,a;e.append("<span class='"+this.iconsClass+"'></span>"),r=e.find("."+this.iconsClass),r.append("<span class='"+this.rangeClass+"'></span>"),i=function(e){return e=o.escape(e),"tabindex='0' aria-label='"+c("Rate this release %(n)s star.","Rate this release %(n)s stars.")(e,{n:e})+"'"},a=function(e){var t;t=e+1,this.append("<a class='star star"+t+" icon icon-star-o' "+(n?i(t):void 0)+" data-value='"+t+"'></a>"),this.append("<a class='star star"+t+" icon icon-star'  "+(n?i(t):void 0)+" data-value='"+t+"'></a>")},o.times(t,a,r.find("."+this.rangeClass)),n&&r.append(this.resetHtml)},setValue:function(e,t,n){t?e.data("value",t):(e.removeAttr("data-value"),e.removeData("value")),n&&this.fillValue(e),this.toggleReset(e)},toggleReset:function(e){var t;t=!e.data("value"),e.toggleClass("not_rated",t)},fill:function(e,t){var n,r,i;t=o.string.toNumber(t,2),"number"==typeof t&&(i=Math.round(t),n=e.find("."+this.rangeClass),r=o.times(e.data("options").max+1,function(e){return"fill"+e.toString()}).join(" "),n.removeClass(r),n.addClass("fill"+i.toString()))},fillValue:function(e){var t;t=e.data("value")||e.data("options").preset||"0",this.fill(e,t),this.updateAriaLabel(e,t)},updateAriaLabel:function(e,t){var n,r;return r=e.data().readOnly,t=o.escape(t),n=t>0||r?c("This release is rated %(value)s star","This release is rated %(value)s stars")(t,{value:t}):s("Rate this release")(),e.attr("aria-label",n)},fillHover:function(e,n){var o,i;"desktop"===t.mode()&&(o=r(n.target),i=o.data("value"),this.fill(e,i))},keyRating:function(e,t){var n,r;if(r=32,n=13,t.keyCode===r||t.keyCode===n)return this.selectRating(e,t),e.focus(),t.preventDefault()},selectRating:function(e,t){var n,s,c,u;d.requireLogin()&&(n=r(t.target),u=n.data("value"),s=e.data("value"),this.setValue(e,u,!0),c=e.data("options").postUrl,c&&r.post(c,{value:u}).done(o.bind(this.updateStats,this,e)).done(function(){l.legacyTrack("release","rated",i.endpoint,u),a.trigger("release:rated",{endpoint:i.endpoint,value:u})}).fail(o.bind(this.setValue,this,e,s,!0)))},updateStats:function(e,t){t&&t.value&&t.count&&e.find(".rating_stats")&&(r(".rating_value").html(t.value),r(".rating_count").html(t.count))},bindEvents:function(e){var t,n,r;r=e.find(".star"),t=e.find("."+this.rangeClass),n=e.find(".reset"),r&&r.on("mousemove",o.bind(this.fillHover,this,e)),t.onFastClick(o.bind(this.selectRating,this,e)).on("keydown",o.bind(this.keyRating,this,e)).on("mouseleave",o.bind(this.fillValue,this,e)),n&&n.onFastClick(o.bind(this.selectRating,this,e)).on("keydown",o.bind(this.keyRating,this,e))}},u(function(){return n.init()}),n})},820:function(e,t,n){var r,o,i,a,s;r=n(2),o=n(3),i=n(9),a=n(12),s=n(305),ds.define("tooltip",function(){var e,t,n,l,c,u,d,f,h,p,g;return f=".needs_tooltip",e=".needs_delegated_tooltip",n=function(e){var t;return e?(t=r(e),t.is(f)||(t=t.find(f))):t=r(f),t},g=function(e){var t,n,o;for(n=0,o=e.length;n<o;)t=r(e[n]),t.data("tooltip")&&(t.removeData("original-title"),t.removeAttr("data-original-title"),t.tooltip("destroy")),n++;return e},h=function(){var e,t,n;return e=r(this),t=r.trim(e.attr("aria-label")),n=e.data("original-title")||e.data("title")||e.attr("title"),!t&&n&&e.attr("aria-label",n),e},p=function(e){return e.each(h)},u=function(e){return a.isMobile||(e.tooltip(),t(e)),e},t=function(e){var t,n,i,a;a=void 0,n=void 0,i=function(){t.css({width:a,height:n})},t=e.filter(function(){var e,t;if(t=r(this),e=this.parentNode.className.match("tooltip_wrapper")&&t.closest("td.status"),e&&e.length)return void 0===n&&(n=e.height()),void 0===a&&(a=e.width()),t}),t.length&&(i(),r(window).off("resize.tooltip_handler").on("resize.tooltip_handler",o.throttle(i,500)))},l=function(){return r([f,e].join(", ")).toArray().forEach(function(e){var t;return null!=(t=r(e).data("tooltip"))?t.hide():void 0})},c=function(e){var t;return t=n(e),g(t),p(t),u(t),t},d={init:function(t){return s.then(function(){return r(document).off("pjax:end.tooltips").on("pjax:end.tooltips",function(e){c(e.target)}),a.isMobile||r(document.body).tooltip({selector:e}),i.on("tooltips:hide",l),c(t)})},setup:function(e){return c(e)}},d.init(),d})},856:function(e,t){!function(){return window.ds="function"==typeof window.ds?window.ds:function(){return(ds.q=ds.q||[]).push(arguments),ds}}()},857:function(e,t,n){var r,o=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},i=[].slice;r=n(3),ds.define=function(){var e,t,n,a,s,l,c,u,d,f;return l={ds:ds},t=r.clone(l),s=[],f=[],u=[],n=function(e,n){var i,a;if("string"==typeof e){if(r.include(u,e))throw new Error("require error: Circular import detected in module "+e+": "+u.join(" > ")+" > "+e);return u.push(e),i=window.webpackRequire(e),r.has(l,e)||i?a=null!=t[e]?t[e]:t[e]=i||l[e](c):s.push(e),void 0===a&&o.call(s,e)<0&&f.push(e),n&&(n[e]=a),u.splice(u.length-1,1),a}throw new Error("require error: "+r.toString(e)+" is not a String")},c=function(){var e,t,r,o,l;if(o=1<=arguments.length?i.call(arguments,0):[],1===o.length)l=n(o[0]);else for(l={},e=0,t=o.length;e<t;e++)r=o[e],n(r,l);return s.length>0&&a(),f.length>0&&d(),l},a=function(){var e;return e=s.join(", "),"undefined"!=typeof console&&null!==console&&"function"==typeof console.error&&console.error("require error: Missing modules "+e),s=[]},d=function(){var e;return e=f.join(", "),"undefined"!=typeof console&&null!==console&&"function"==typeof console.warn&&console.warn("require warning: Modules have no return value "+e),f=[]},ds.require=function(){return c.apply(null,arguments)},e=function(e,t){if(l[e])throw new Error("A module named "+e+" is already defined.");return l[e]=function(){return t.call(window,c)}}}()},858:function(e,t,n){var r,o;o=n(13),r=function(){return n.e(78,function(){return n(859)})},o(function(){var e;if(e=document.getElementsByClassName("add_to_list"),e.length>0)return r()}),e.exports=r},860:function(e,t,n){"use strict";var r=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=n(5),i=n(306),a=n(13),s={};s.init=function(){var e={rb:["Marketplace","Release - X for sale, button"],ab:["Marketplace","Artist - X for sale, button"],lb:["Marketplace","Label - X for sale, button"],is:["Marketplace",'Clicked "Items For Sale" on release page (when none of this version are for sale)'],"item-vc":["Marketplace","View release details, from item page"],rr:["Marketplace","Clicked Recommended Release on Release Page"],drec:["Marketplace","Clicked Recommended Release in Dashboard Module"],idrec:["Marketplace","Clicked Recommended Release on Item Details"],crec:["Marketplace","Clicked Recommended Release on Cart"],sprec:["Marketplace","Clicked Recommended Release on Sellers Page"],bp_det:["Marketplace","Clicked details link on mp browse page"],atc_br:["Marketplace","Clicked Add to Cart on mp browse page"],atc_det:["Marketplace","Clicked Add to Cart on mp item details page"],mb:["Marketplace","clicked x for sale on MR page"],wh_new:["Marketplace","Clicked link in wantlist email - HTML format (Responsive)"],hxiiw:["Marketplace","Clicked Has X Items I Want"],rci:["Marketplace","Viewed product page from modified-cart items"],rce:["Marketplace","Viewed cart from removed item email"],rsd_m:["Marketplace","Clicked Release Buy Now link on RSD Page"],rsd_db:["Database","Clicked Edit Release link on RSD Page"],d_gs_c:["Dashboard","Clicked Collection"],d_gs_w:["Dashboard","Clicked Wantlist"],d_gs_p:["Dashboard","Clicked Privacy Settings"],d_gs_n:["Dashboard","Clicked Notification Settings"],hb_d:["Header Link","Clicked Discover text link"],hb_t:["Header Link","Clicked Track text link"],hb_c:["Header Link","Clicked Contribute text link"],hb_b:["Header Link","Clicked Buy text link"],hb_s:["Header Link","Clicked Sell text link"]},t=o.deparam(),n=t.ev,a=n in e?e[n]:["Unknown","event code: "+n],s=r(a,4),l=s[0],c=s[1],u=s[2],d=s[3];n&&i.legacyTrack(l,c,u,d,!0)},a(function(){return s.init()}),e.exports=s},861:function(e,t,n){"use strict";var r=n(307),o=n(305),i=n(11),a=n(3),s=a.noop,l=n(2),c=i.all([r.init(),o]);c.then(function(){var e=l('<img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=1305510736164775&ev=PageView&noscript=1" />');return e.appendTo(document.body)}).catch(s)},862:function(e,t,n){var r,o,i;r=n(2),o=n(3),i=n(5),n(13),ds.define("confirm",function(e){var t,n,a,s;return s=e("ready"),t=function(e){var t,n;t=e.get(0),t.click?t.click():(n=e.attr("href")).length>1?window.location=n:e.click()},a=function(e){var n,a,s;return a=function(){n.data("confirmed",!0),o.delay(t,25,n)},n=r(e),s=n.data("confirm-message"),i.confirm(s).then(a)},n=function(){var e;return e=!!r(this).data("confirmed"),e||a(this),e},s(function(){return r("body").on("click",".confirm",n)})})},863:function(e,t,n){var r,o,i,a;r=n(2),o=n(7),a=n(5),i=n(306),ds.define("copyShortcut",function(){var e;return e=function(){var e;return e=function(){var e,t;e=r(".copy_shortcut_code",this).get(0),a.selectText.call(e),t=o.pageObject&&o.pageObject.objectType,t&&i.legacyTrack(t,"Selected Discogs code")},r(".copy_shortcut").on("click",e)},r(e),{init:e}})},864:function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var o=n(7),i=o.interactiveAdmin,a=n(2),s=ds.require("ready"),l=["icon-spin","icon-green","icon-red","icon-discogs","icon-store","icon-italic","icon-bold","icon-quote-right","icon-list-ol","icon-header","icon-rotate-left","icon-level-up","icon-caret-up","icon-caret-left","icon-caret-right","icon-star-half","icon-star-half-empty","icon-bars","icon-collection","icon-wantlist","icon-vinyl","icon-cd","icon-label","icon-artist","icon-cassette","icon-digital","icon-music","icon-search","icon-envelope-o","icon-heart","icon-star","icon-star-o","icon-user","icon-users","icon-th-large","icon-th-list","icon-check","icon-close","icon-search-plus","icon-search-minus","icon-power-off","icon-cog","icon-gear","icon-cogs","icon-gears","icon-trash","icon-trash-o","icon-file-o","icon-clock-o","icon-road","icon-download","icon-repeat","icon-refresh","icon-list-alt","icon-lock","icon-flag","icon-tag","icon-tags","icon-print","icon-camera","icon-font","icon-align-justify","icon-list","icon-pencil","icon-edit","icon-pencil-square-o","icon-share-square-o","icon-arrows","icon-play","icon-pause","icon-chevron-left","icon-chevron-right","icon-plus-circle","icon-times","icon-times-circle","icon-check-circle","icon-question-circle","icon-info-circle","icon-check-circle-o","icon-ban","icon-arrow-left","icon-arrow-right","icon-arrow-up","icon-arrow-down","icon-mail-forward","icon-expand","icon-compress","icon-plus","icon-minus","icon-exclamation-circle","icon-eye","icon-eye-slash","icon-exclamation-triangle","icon-calendar","icon-comment","icon-magnet","icon-chevron-up","icon-chevron-down","icon-shopping-cart","icon-bar-chart","icon-facebook-square","icon-key","icon-comments","icon-thumbs-o-up","icon-thumbs-o-down","icon-thumb-tack","icon-external-link","icon-sign-in","icon-twitter","icon-facebook","icon-unlock","icon-feed","icon-hdd-o","icon-bullhorn","icon-hand-o-left","icon-arrow-circle-left","icon-arrow-circle-right","icon-arrow-circle-down","icon-globe","icon-wrench","icon-tasks","icon-group","icon-chain","icon-cloud","icon-flask","icon-copy","icon-files-o","icon-floppy-o","icon-list-ul","icon-magic","icon-truck","icon-google-plus","icon-money","icon-caret-down","icon-sort","icon-envelope","icon-gavel","icon-dashboard","icon-bolt","icon-cloud-upload","icon-file-text-o","icon-plus-square","icon-angle-double-right","icon-angle-left","icon-angle-right","icon-angle-up","icon-angle-down","icon-desktop","icon-mobile","icon-spinner","icon-mail-reply","icon-reply","icon-keyboard-o","icon-code","icon-mail-reply-all","icon-reply-all","icon-calendar-o","icon-ellipsis-h","icon-play-circle","icon-minus-square","icon-dollar","icon-file","icon-thumbs-up","icon-thumbs-down","icon-instagram","icon-tumblr-square","icon-long-arrow-left","icon-long-arrow-right","icon-archive","icon-soundcloud","icon-newspaper-o","icon-calculator","icon-line-chart","icon-mixcloud","icon-upload","icon-cc-paypal","icon-credit-card","icon-pinterest","icon-barcode"],c=function(e){
return e.className.split(" ").filter(function(e){return e.match(/^icon-/)})},u=function(){var e=a(".icon").toArray().reduce(function(e,t){var n=c(t);return[].concat(r(e),r(n))}).filter(function(e,t,n){return n.indexOf(e)===t}),t=e.reduce(function(e,t){return l.indexOf(t)<0&&e.indexOf(t)<0&&e.push(t),e},[]);return requestAnimationFrame(function(){if(0!==t.length){var e=t.join(", ");throw new Error("Icon classes not found in stylesheet: "+e)}}),t};e.exports=s(function(){i&&u()})},865:function(e,t,n){var r,o,i;i=n(7).pageObject,r=n(25).getText,o=n(306),ds.define("discussionPost",function(e){var t,n,a,s,l,c,u,d,f,h,p,g,m,v,y,b,w,_,k;return h=e("_","$","ready","templates"),n=h._,t=h.$,f=h.ready,b=h.templates,d=e("reactDialogs").makeReactDialog,a={postId:null,responseText:null},s=null,p=function(){var e;return s||(s=t('<div id="discussion_message_report" data-title="">'),e=t("#discussion_message_report_title").text(),s.attr("data-title",e),s.on("submit","form",m)),s.html(b.discussionMessageReport(a))},k=function(e){return a=n.extend(a,e),p()},y=function(){if(d({title:r("Report Post")(),content:s.html()}),i)return o.legacyTrack(i.objectType,"Show Report Abuse Modal")},l=function(e){return t(e).closest(".thread_message")},c=function(e){return l(e).attr("id")},m=function(e){return e.preventDefault(),g(this)},v=function(e){return e.preventDefault(),k({postId:c(e.target),responseText:""}),y()},g=function(e){return t.ajax({url:t(e).attr("action"),method:"POST",data:t(e).serialize(),dataType:"text",success:function(n){var r;return k({responseText:n}),r=t("#"+t('input[name="obid"]',e).val()),r.addClass("thread-message-reported"),w(r,!0)},error:function(e){return k({responseText:e.responseText})}})},_=function(e){return e.preventDefault(),w(l(e.target),!1)},w=function(e,t){return e.toggleClass("thread-message-hidden",t)},u=function(){return t("body").on("click",".thread_message .thread_action_report",v),t("body").on("click",".thread_message .toggle-hidden-message",_)},f(u)})},866:function(e,t,n){"use strict";var r=n(2),o=n(7),i=n(5),a=n(315),s=n(13),l=i.getUrl,c={init:function(){var e=r("#i18n_select");return e.on("change",this.updateLanguage)},updateLanguage:function(){var e=r(".language:checked").val(),t=["en","es","de","fr","it","ja"];if(a("language2",e),o.username)r.ajax({type:"POST",url:l("/settings/locale/update"),data:{locale:e}}).then(function(){return window.location.href=i.updateParams(window.location.href,{add:{lang_update:1}})});else{var n=window.location,s=n.pathname.split("/")[1];if(t.includes(s)){var c=n.pathname.replace(s,e);window.location.href=n.origin+c+n.search+n.hash}else{var u="/"+e+n.pathname;window.location.href=n.origin+u+n.search+n.hash}}}};s(function(){return c.init()}),e.exports=c},867:function(e,t,n){var r,o,i,a,s;r=n(2),i=n(25),s=n(5),a=n(298),o=n(12),n(304),n(13),ds.define("fullWidthHeader",function(e){var t,n,l,c,u,d;return n=e("layout"),u=e("ready"),u(function(){return o.isMobile&&a.setupActionMenuView(r("#full-width-header")),r(".header-read-more").each(function(e,t){var n;if(n=r(t),n.height()<n[0].scrollHeight)return r("#full-width-header").addClass("header-can-expand"),l(n)}),r(".header-can-expand .column-content, .is_mobile .header-title").onFastClick(function(e){var n,o;e.target.href||e.preventDefault(),e.stopPropagation(),n=r("body"),o=n.hasClass("expand-header-content"),e.target.href||(n.off("click",t),o?t(e):(r("body").addClass("expand-header-content"),c(),setTimeout(function(){return n.on("click",t)},400)))}),r(".header-content-close").onFastClick(t)}),c=function(){var e;return e=r(document).height()-r("#full-width-header").height(),r(".full-width-header-cover").css("height",e),"mobile"===n.mode()&&s.scrollTo(r(".header-column-wrap")),d(!1)},t=function(e){var o;if(!s.hasSelectedText()&&!e.target.href)return o=r("body"),o.removeClass("expand-header-content"),o.off("click",t),r(".full-width-header-cover").css("height",0),"mobile"===n.mode()&&s.scrollTo(r("#full-width-header")),e.preventDefault(),d(!0)},d=function(e){var t;return t=20,r(".column-content .header-read-more").each(function(){var n;return e?r(this).removeAttr("style"):(n=this.scrollHeight+t,r(this).css("max-height",n))})},l=function(e){var t,n;return n="<a class='readmore_toggler'><span class='read-more-expand'>"+i.getText("More")()+" <i class='icon icon-caret-down'></i></span><span class='read-more-collapse'>"+i.getText("Less")()+" <i class='icon icon-caret-up'></i></span></a>",t=r(n),e.append(t).addClass("has-read-more-content")}})},868:function(e,t,n){"use strict";var r=n(2),o=n(5),i=n(306);n(304);var a=ds.require("layout");n(13);var s=ds.require("ready"),l={};l.init=function(){var e="mobile"===a.mode(),t=r("#site_navigation"),n=r("#mobile_site_navigation"),s=r(".site_nav_group"),l=null,c=function(e){return e.parents(".site_nav_group")},u=function(){if(e){var t=l.data("id"),n=r("#site_nav_submenu_"+t);n.removeClass("opened")}return l.removeClass("opened")},d=function(t){if(e){var n=t.data("id");o.scrollTo(t);var a=r("#site_nav_submenu_"+n);a.addClass("opened"),i.legacyTrack("mobile","nav_"+n+"_open")}return t.addClass("opened")},f=function(){s.off("mouseenter.headerNav"),r("body").off("click.headerNav keyup.headerNav")},h=function(){u(),f(),l=null},p=function(){var t=r("body");t.on("click.headerNav",function(e){var t=c(r(e.target));t.length||h()}),t.on("keyup.headerNav",function(e){var t=27;e.keyCode===t&&h()}),e||s.on("mouseenter.headerNav",".nav_group_control",function(e){if(l){var t=c(r(e.target));l.is(t)||(u(),l=d(t))}})},g=function(){var e=r("#activity_menu"),o=r("#site_nav_submenu_account");r("#activity_menu_placeholder").append(e,o),e.find(".button").removeClass("button button-green"),r("#site_navigation_placeholder").append(t),r("#mobile_site_navigation_toggle").on("click",function(e){e.preventDefault(),n.toggleClass("visible"),i.legacyTrack("mobile","nav_toggle")})};if(s.on("click",".nav_group_control",function(e){e.preventDefault();var t=c(r(e.target));if(l){if(l.is(t))return void h();u()}else p();l=d(t)}),e)return g()},s(l.init),e.exports=l,ds.define("headerNav",function(){return l})},869:function(e,t,n){"use strict";var r=n(3),o=n(2),i=n(10),a=n(7),s=n(25),l=n(218),c=n(5),u=n(338);n(447),n(304),n(373),n(13),n(813);var d=ds.require("images"),f=ds.require("layout"),h=ds.require("onNextVisit"),p=ds.require("ready"),g=ds.require("skittles"),m=c.getUrl,v=500,y=3e5,b=1e3,w=void 0,_={init:function(){if(this.$fields=o(".autocomplete"),!(this.$fields.length<1))return this.requests=[],this.keyCodes={esc:27},l("/",r.bind(_.focusOnField,this)),o(document.body).on("keydown",r.bind(_.blurField,this)),_.$searchTypeTabs=o(_.searchTabsTemplate()),_.searchModel=new _.SearchModel,_.searchView=new _.SearchView({el:o("#site_search"),model:_.searchModel}),this.$fields.each(function(e,t){o(t).data("valueCache",[])}),this.$form=this.$fields.parents("form").eq(0),this.makeSpinner()}};_.SearchModel=i.Model.extend({isSearching:!1}),_.SearchView=i.View.extend({events:function(){return{"focus #search_q":"focusHandler","blur #search_q":"minimizeSearchBar","keyup #search_q":"listenToKeys","mousedown #do_site_search":"clickSearch",submit:"search"}},initialize:function(){return this.model.set("searchType","all"),this.setSearchValue(),this.listenTo(this.model,"change:searchType",this.updateSearchType),this.okayToClose=!0},search:function(e){e&&e.preventDefault(),this.model.get("isSearching")||(this.model.set("isSearching",!0),window.open(this.$el.attr("action")+"?"+this.$el.serialize(),o(".subform_table").length>0?"_blank":"_self"))},listenToKeys:function(e){var t=27===e.keyCode;t&&this.minimizeSearchBar(e)},setSearchValue:function(){return this.$search=this.$el.find("#search_q"),this.model.set("q",this.$search.val())},isFocused:function(){return document.activeElement===this.$search.get(0)},focusHandler:function(){var e=this,t=200;return this.expandSearchBar(),this.setSearchValue(),this.$search.select(),setTimeout(function(){return _.openAutocomplete.call(e.$search.get(0))},t+25)},expandSearchBar:function(){return o("#site_header").addClass("search_focused",this.isFocused())},clickSearch:function(e){if(e.currentTarget===o("#do_site_search").get(0))return this.okayToClose=!1,this.search(),this.$search.focus()},minimizeSearchBar:function(){if(this.okayToClose)return o("#site_header").removeClass("search_focused")},updateSearchType:function(){var e=this.model.get("searchType","all");return o(".advanced_search_type").val(e),o("#search_q").autocomplete("search")}}),_.makeExpireCache=function(e,t){var n=e.id;return function(){var e=o("#"+n),i=e.data("valueCache");e.data("valueCache",r(i).without(t))}},_.focusOnField=function(e){this.$fields.focus(),e.preventDefault()},_.blurField=function(e){this.$fields.is(":focus")&&this.keyCodes.esc===e.keyCode&&(this.$fields.blur(),e.preventDefault())};var k=function(){var e=o(this),t=e.val(),n=e.data("autocompleteCache")||{},i=r.now(),a=r.has(n,t),s=r(n).chain().values().max().value()||0,l=b>i-s,c=!1;return _.searchModel.set("q",t),a?c=!0:l?(clearTimeout(w),w=r.delay(function(){return e.autocomplete("search")},b),c=!1):(c=!0,n[t]=i,e.data("autocompleteCache",n),r.delay(function(){var n=e.data("autocompleteCache");return delete n[t]},y)),c};_.openAutocomplete=function(){var e=o(this);u().then(function(){e.data("uiAutocomplete")||(e.autocomplete({minLength:2,delay:v,position:"mobile"===f.mode()?{my:"left top+7"}:void 0,focus:function(){return!1},select:_.fieldSelect,source:_.fieldSource,search:k}),e.data("uiAutocomplete")._renderMenu=function(e,t){var n=this;return e.append(_.$searchTypeTabs.onFastClick(_.updateActive)),o.each(t,function(t,r){return n._renderItem=_.fieldRenderItem(e,r)})}),e.autocomplete("search")})},_.updateActive=function(e){e.stopPropagation(),e.preventDefault();var t=o(e.target).siblings(".search_type");return t.prop("checked",!0),_.searchModel.set("searchType",t.val())},_.fieldSelect=function(e,t){var n=o(this);n.val(t.item.name);var r=t.item.type.toLowerCase(),i=t.item._position;return h("google.legacyTrack","search","autocomplete result selected",r,i),n.hasClass("ac_submit")&&window.open(t.item.uri,(null!=a.endpoint?a.endpoint.match(/subform/):void 0)?"_blank":"_self"),!1},_.fieldSource=function(e,t){var n=o(this.element),r={url:a.autocompleteUrl,dataType:"json",data:_.searchModel.toJSON(),success:_.formatData(t,n),error:function(){t([])}},i=n.attr("class").match(/ac_type_(\w+)/);i&&(r.data.type=i[1]);var s=o.ajax(r);_.searching(s),_.requests.push(s),s.done(_.finishedSearching(s))},_.formatData=function(e,t){return function(n){if(n){for(var o=0;o<n.length;o++){var i=n[o];i.artist&&(i.artist=r.escape(i.artist)),i.title&&(i.title=r.escape(i.title)),i._position=o+1}t.hasClass("ac_submit")&&n.push({type:"_advanced_search"}),e(n)}}},_.fieldRenderItem=function(e,t){var n=o(this.element).val(),r=void 0,i=void 0,a=void 0;if("_advanced_search"===t.type)return t.uri=m("/search/advanced"),r=o(['<li class="advanced_search_link">',"<a href='"+t.uri+"'>",'<i class="icon icon-search"></i>'," "+s.getText("Advanced Search")(),"</a></li>"].join("")),r.data("ui-autocomplete-item",{name:n,type:"advanced",uri:t.uri}),r.appendTo(e),r;var l='<span class="format">('+s.getText("all versions")()+")</span>",c='<span class="format">'+t.format+"</span>",u="Master Release"===t.type?l:"Release"===t.type?c:"";i='<span class="label with-sublabel">'+t.title+u+"</span>",a='<span class="sublabel">'+(t.type.match(/release/i)?t.artist:t.type)+"</span>";var f="";t.marketplace&&t.marketplace.min&&(f="<span class='release_marketplace'>         "+s.getText("%(quantity)s from %(currency)s")({quantity:"<span class='release_marketplace_quantity'>"+t.marketplace.quantity+"</span>",currency:"<span class='release_marketplace_price'>"+t.marketplace.currency+t.marketplace.min.toFixed(2)+"</span>"})+"         </span>");var h=g.render(t),p=d.make$thumbnail(t.thumb),v=o('<a href="'+t.uri+'">'+h+i+a+f+"</a>");return v.prepend(p),h&&v.addClass("has_skittles"),o("<li />").data("ui-autocomplete-item",t).append(v).appendTo(e)},_.makeSpinner=function(){return this.$spinner=o('<i class="icon icon-spinner icon-spin" id="autocomplete_spinner"></i>'),this.$form.append(this.$spinner),this.$spinner},_.searching=function(e){this.$spinner||this.makeSpinner();var t=this.$form;e.delayedNotification=setTimeout(function(){t.addClass("searching")},200)},_.finishedSearching=function(e){return r.bind(function(){clearTimeout(e.delayedNotification),r(this.requests).last()===e&&(this.$form.removeClass("searching"),this.requests.length=0)},_)},_.searchTabsTemplate=function(){return'<ol id="search_tabs" class="list_no_style float_fix">\n    <li>\n        <input type="radio" id="search_all" class="search_type" name="type" value="all" checked />\n        <label for="search_all">'+s.getText("Everything")()+'</label>\n    </li>\n    <li>\n        <input type="radio" id="search_release" class="search_type" name="type" value="release" />\n        <label for="search_release">'+s.getText("Releases")()+'</label>\n    </li>\n    <li>\n        <input type="radio" id="search_artist" class="search_type" name="type" value="artist" />\n        <label for="search_artist">'+s.getText("Artists")()+'</label>\n    </li>\n    <li>\n        <input type="radio" id="label_search" class="search_type" name="type" value="label" />\n        <label for="label_search">'+s.getText("Labels")()+"</label>\n    </li>\n</ol>"},p(function(){return _.init()}),e.exports=_},870:function(e,t,n){var r,o;r=n(2),o=n(5),n(13),ds.define("historyListener",function(e){var t,n,i;return i=e("ready"),t=window.history,n=function(){var e,n,i;return e=r("#log_in_link"),n=t.pushState,i=t.replaceState,t.pushState=function(e){return"function"==typeof t.onpushstate&&e&&t.onpushstate({state:e}),n.apply(t,arguments)},t.replaceState=function(e){return"function"==typeof t.onreplacestate&&t.onreplacestate({state:e}),i.apply(t,arguments)},window.onpopstate=t.onpushstate=t.onreplacestate=function(){var t,n,r;return t=e.attr("href"),r={return_to:decodeURIComponent(window.location.href)},n=o.updateParams(t,{add:r}),e.attr("href",n)}},i(n)})},871:function(e,t,n){var r;r=n(25).getText,ds.define("interactiveadmin",function(e){var t,n,o,i,a,s;return s=e("$","ready"),t=s.$,a=s.ready,n=e("reactDialogs").makeReactDialog,i={},i.init=function(){return t(".admin-invoice-modal").on("click",this.openInvoiceModal)},o={Pay:"pay-invoice-modal",Extend:"extend-invoice-modal",Create:"new-invoice-modal",CreditUser:"admin-credit-user-modal",ChangeBillingDate:"admin-change-billing-date-modal"},i.openInvoiceModal=function(e){var i,a,s;return e.preventDefault(),s=t(this).data("type"),a=t(this).data("title")||s+" Invoice",i=t("#"+o[s]),n({content:i.html(),width:t("html").hasClass("is_mobile")?t(window).width():440,title:a,buttons:[{text:"ChangeBillingDate"===s||"Extend"===s||"Pay"===s?r("Okay")():r("Create")(),icon:"check-circle",color:"green",click:function(e){return t(e.target).parents(".react-modal").find("form").submit()}},{text:r("Cancel")(),icon:"ban"}]})},a(function(){return i.init()}),i})},872:function(e,t){var n=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};ds.define("keyCode",function(){var e,t;return t={},e={"[":219,"]":221,a:65,c:67,v:86,x:88,backspace:8,comma:188,tab:9,shift:16,space:32,enter:13,escape:27,ctrl:[17,91,93],left:37,right:39,up:38,down:40},t.key=e,t.is=function(t,r){var o,i;return o=e[t],i=r.which,"object"==typeof o?n.call(o,i)>=0:i===o},t.contains=function(e,n){var r;return r=e.filter(function(e){return t.is(e,n)}),Boolean(r.length)},t.ctrlDown=function(e){return e.ctrlKey||e.metaKey},t.shiftDown=function(e){return Boolean(e.shiftKey)},t.altDown=function(e){return Boolean(e.altKey)},t})},873:function(e,t,n){var r,o,i;i=n(9),o=n(3),r=n(11),ds.define("LoadQueue",function(){var e,t,n,a;return a={loaded:"loadQueue:resource:loaded",loading:"loadQueue:resource:loading",failed:"loadQueue:resource:failed",allLoaded:"loadQueue:resources:loaded"},n={loading:function(e){return i.trigger(a.loading,e.element)},loaded:function(e){return i.trigger(a.loaded,e.element)},failedLoading:function(e,t){return i.trigger(a.failed,e,t.element)},allLoaded:function(){return i.trigger(a.allLoaded)}},t=function(){function e(e){if(this.element=e,this.loading=this.loaded=this.error=!1,this.src=this.element.getAttribute("data-src"),null==this.src)throw new Error("Resource requires a source")}return e.prototype.load=function(){return new r(this.error?function(e){return function(t,n){return n(Error("Resource not loaded"),e)}}(this):this.loaded?function(e){return function(t){return t(e)}}(this):function(e){return function(t,n){var r;return r=new Image,r.onload=function(){return e.loaded=!0,e.loading=!1,t(e)},r.onerror=function(){return e.error=!0,e.loading=!1,n(Error("Resource not loaded"),e)},e.loading=!0,r.src=e.src}}(this))},e}(),e=function(){function e(e,n){this.options=n,this.events=a,this.queue=o.map(e,function(e){return new t(e)})}return e.prototype.isEmpty=function(){return!this.findNext()},e.prototype.findNext=function(){return o.find(this.queue,function(e){return!e.loaded})},e.prototype.loadNext=function(e){return null==e&&(e=1),e=Math.max(1,e),o.each(new Array(e-1),function(e){return function(){return e.handleResource(e.findNext())}}(this))},e.prototype.loadAtIndex=function(e){return this.handleResource(this.queue[e])},e.prototype.handleResource=function(e){var t;return!!e&&(t=function(e){return function(t){if(n.loaded(t),e.isEmpty())return n.allLoaded()}}(this),e.load().then(t,n.failedLoading))},e}()})},874:function(e,t,n){var r,o,i,a,s,l;r=n(2),o=n(3),i=n(7),l=n(5),a=n(9),s=n(306),n(13),ds.define("notes",function(e){var t,n,c,u;return c=e("ready"),t=l.getUrl,n={},n.init=function(){var e;if(e=r(".notes_field"),e.length)return e.each(this.initField)},n.initField=function(){var e;e=r(this),e.data("notes-init")||e.on("click",".notes_show",o.bind(n.edit,e)).on("click","#notes_edit_save",o.bind(n.save,e)).on("change",".notes_select",o.bind(n.save,e)).on("click","#notes_edit_cancel",o.bind(n.edit,e)).data("notes-init",!0)},n.edit=function(){var e,t,i;e=this,e.hasClass("notes_list")?setTimeout(function(){r("body").on("click.notesSelectClose",o.partial(n.selectClose,e))},100):(t=null!=(i=e.find(".notes_text").data("content"))?i.toString().replace(/<br[ ]?[\/]?>/g,"\n"):void 0,setTimeout(function(){e.find("textarea").trigger("focus").val(t)},1)),e.toggleClass("notes_editing")},n.selectClose=function(e,t){var n;n=0===r(t.target).closest(e.find(".notes_select")).length,n&&(e.removeClass("notes_editing"),r("body").off("click.notesSelectClose"))},n.save=function(){var e,i,a,s,l,c,d;e=this,d="wantlist"===e.data("type"),a=t("/list/"+(d?"want_update":"coll_update")),s=e.find("select").val()||e.find("textarea").val(),l=e.data("field"),c="collection_folders"===l,s=c&&!s?1:s,i={release_id:e.data("id"),coll_id:e.data("coll-id"),field_id:c?null:l,folder_id:c?s:null,val:c?e.find("option:selected").text():s,notes:s},r.ajax({type:"POST",url:a,dataType:"json",data:i,success:o.bind(n.display,e)}).then(function(){return u(d,e.data("field-name"))})},n.display=function(e){var t,n;t=this,n=o.isBlank(e.html),t.removeClass("notes_editing").toggleClass("notes_edited",!n).toggleClass("notes_not_edited",n),t.find(".notes_text").html(e.html).data("content",e.content),r("body").off("click.notesSelectClose")},c(function(){return n.init()}),u=function(e,t){var n,r,o;return o=e?"Wantlist Item":"Collection Item",n=t+" field edited",r=i.endpoint,s.legacyTrack(o,n,r),a.trigger("note-field:edited",{fieldName:t,type:o})},n})},875:function(e,t,n){var r,o,i,a,s,l,c;r=n(2),o=n(3),i=n(7),c=n(5),a=n(9),s=n(306),l=n(225),n(320),n(13),ds.define("pagination",function(e){var t,n,u,d;return t=e("persist"),u=e("ready"),e("vimShortcuts"),d=function(){var e,t;return e="strict"in c.deparam(),t=e?{remove:["strict"]}:{add:{strict:"true"}},location.href=c.updateParams(location.href,t)},n={init:function(){var e,t;return r("#pjax_container").length>0&&(e=r(document),t=r("#pjax_container"),t.attr("aria-live","polite"),e.on("pjax:end",function(){return s.legacyTrackPageView(i.ga_pageview_page,i.ga_pageview_title)}),e.on("pjax:end",o.bind(n.setupBinding,this)),e.on("pjax:send pjax:complete",this.toggleLoadIndicator),e.pjax(".pagination a","#pjax_container",{timeout:t.data("pjax-timeout")||4e3}),e.on("pjax:start",function(){return a.trigger(l.PAGE_LOADING)}),e.on("pjax:end",function(){return a.trigger(l.PAGE_LOADING_FINISHED)}),o.delay(n.setScrolled,1e3),r(window).on("scroll",o.throttle(n.setScrolled,1e3))),this.setupBinding()},restoreValue:function(e,t){var n;n=r("option[selected]",t).val(),n&&n!==t.value&&(t.value=n)},loadOnChange:function(){var e,n,o,i,a,s,l;n=r(this),e=n.closest("form"),e.data("persist-filters")&&(a=e.data("section"),i=n.attr("name"),l=n.val(),t.set(a+"_"+i,l)),o=c.deparam(e.serialize()),"limit"===n.attr("name")&&(o.page=1),s=c.updateParams(e.attr("action"),{add:o}),window.location=s},setupBinding:function(){r(".pagination select").each(this.restoreValue).on("change",this.loadOnChange),r(".strict_search_toggle").on("change",d)},toggleLoadIndicator:function(e){var t;t="pjax:send"===e.type,r(e.target).toggleClass("loading",t)},setScrolled:function(){var e,t,n;t=(null!=(n=r("#pjax_container").offset())?n.top:void 0)||0,e=window.scrollY>t,r("html").toggleClass("pjax_container_scrolled",e)}},u(function(){return n.init()}),n})},876:function(e,t,n){var r,o,i;i=n(5),r=n(9),o=n(12),n(13),ds.define("parallax",function(e){var t,n,a,s,l,c,u;return l=e("ready"),s=null,a=null,u=function(){var e,t,n,r,o;for(o=window.scrollY,t=0,n=s.length;t<n;t++)r=s[t],o>=r.start&&o<=r.end&&(e=Math.floor((o-r.start)/(r.end-r.start)*200),c(r.el,e))},c=function(e,t){return i.raf(function(){var n;return n="translate3d(0, "+t+"px, 0)",e.style.transform=n,e.style.webkitTransform=n,e.style.msTransform=n})},t=function(){var e,t,n,r,o,i,l,c,u;for(s=[],c=[],t=n=0,r=a.length;n<r;t=++n)i=a[t],u=window.innerHeight,e=i.getBoundingClientRect(),o=e.top+window.pageYOffset,l={el:i,start:o-u>0?o-u:0,end:o+e.height},c.push(s[t]=l);return c},n=function(){if(a=document.getElementsByClassName("parallax-bg"),a.length&&!o.isMobile&&o.has3d()&&o.hasGetBoundingClientRect())return t(),window.addEventListener("scroll",u),window.addEventListener("resize",t),r.on("parallax:calculate",t)},l(n)})},877:function(e,t,n){"use strict";var r=n(25),o=n(5),i=n(12),a=n(13);Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});var s={init:function(){for(var e=document.getElementsByClassName("readmore"),t=0;t<e.length;t++)this.measure(e[t])?this.make(e[t]):e[t].classList.add("uncropped")},measure:function(e){var t=e.dataset&&e.dataset.maxLines?e.dataset.maxLines:6,n=20,r=n*t;return e.clientHeight>=r},make:function(e){var t="<a class='readmore_toggler'>\n                              <span class='more'>\n                                  "+r.getText("More")()+" <i class='icon icon-caret-down'></i>\n                              </span>\n                              <span class='less'>\n                                  "+r.getText("Less")()+" <i class='icon icon-caret-up'></i>\n                              </span>\n                          </a>";e.insertAdjacentHTML("beforeend",t),document.body.addEventListener("click",function(t){if(t.target.closest(".readmore_toggler"))return e.classList.toggle("uncropped"),t.target.blur(),!e.classList.contains("uncropped")&&i.isMobile&&o.scrollTo(e),!1});for(var n=document.getElementsByClassName("readmore_toggler"),a=0;a<n.length;a++)i.hasTouch&&n[a].classList.toggle("touch");e.classList.add("initialized")}};a(function(){return s.init()}),e.exports=s},878:function(e,t,n){var r,o,i;i=n(7).pageObject,r=n(2),o=n(306),ds.define("reportAbuse",function(e){var t,n,a;return a=e("ready"),t=e("reactDialogs").makeReactDialog,n={},n.init=function(){return r(".report_abuse").on("click",n.showReportAbuseModal)},n.showReportAbuseModal=function(e){var n;n=r("#report_abuse_modal"),t({title:n.data("title"),content:n.html()}),i&&o.legacyTrack(i.objectType,"Show Report Abuse Modal"),e.preventDefault()},n.reportAbuse=function(){return r(this).find("form").submit()},a(function(){return n.init()}),n})},879:function(e,t,n){var r,o,i;r=n(2),o=n(3),i=n(12),n(13),ds.define("rollover",function(e){var t,n,a,s,l,c;return c=e("ready"),a=e("lazy$element"),l={},s=!1,t=function(e){var t,n;if(this.$rolloverLink=r(e),this.$rolloverLink.on("mouseout",o.bind(this.startTimeout,this)),t=this.$rolloverLink.attr("href")?this.$rolloverLink.attr("href"):this.$rolloverLink.data("link"))return n=t.replace("/artist/","/artist_rollover/").replace("/label/","/label_rollover/"),this.lazy$dialog=function(e){return function(){return a(n).call().then(o.bind(e.buildDialog,e))}}(this),this.mouseOver()},t.prototype={mouseOver:function(){s||(this.rolloverTimeout=setTimeout(function(e){return function(){return e.lazy$dialog().then(function(e){return e.dialog("open")})}}(this),750))},buildDialog:function(e){var t;return t=r("<div class='rollover_preview' />").append(e),t.discogsDialog({maxHeight:250,width:280,modal:!1,position:{my:"left+15 top-11",at:"right top",of:this.$rolloverLink,collision:"flip",using:function(e,t){var n,o,i;o=e.left>t.target.left?"left":"right",i=e.top<=t.target.top-10&&e.top>=t.target.top-13?"top":"bottom",n="ui-dialog-arrow-"+o+"-"+i,r(this).css({left:e.left,top:e.top}).attr("class",function(e,t){return t.replace(/\bui-dialog-arrow-\S+/g,"")}).addClass(n)}},title:t.find("#ro_thing_name").text(),dialogClass:"ui-dialog-arrow",open:function(e){return function(){return t.data("isDialogOpened",!0),e.scrollBug(t),t}}(this),create:o.bind(this.setupEvents,this,t)}).then(o.bind(function(e){return e.on("dialogbeforeclose",function(){var t;t=e.data("ui-dialog").opener,t.prop("disabled",!0),setTimeout(function(){return t.prop("disabled",!1)},50),e.data("isDialogOpened",!1),e.off("dialogbeforeclose")}),this.$dialog=e},this))},startTimeout:function(){var e;e=this.$dialog,this.endTimeout(),e&&(this.rolloverTimeout=setTimeout(function(){return e.data("isDialogOpened")&&("function"==typeof e.dialog?e.dialog("close"):void 0)},300))},endTimeout:function(){this.rolloverTimeout&&clearTimeout(this.rolloverTimeout)},setupEvents:function(e){e.closest(".ui-dialog").on("mouseover",o.bind(this.endTimeout,this)).on("mouseout",o.bind(this.startTimeout,this))},scrollBug:function(e){e.scrollTop(0)}},n=function(){if(!i.isMobile)return r(document.body).on("mouseover",".rollover_link",function(){var e;e=r(".rollover_preview"),e.length&&(e.data("isDialogOpened",!1),e.dialog("destroy")),new t(this)}),r(window).on("mousedown mouseup",function(){s=!s})},c(n),l})},880:function(e,t){ds.define("section_as_link",function(e){var t,n,r,o;return o=e("$","ready","key"),t=o.$,r=o.ready,n=o.key,r(function(){return t("body").on("click",".section-as-link",function(e){var r,o,i,a;r=t(e.target).is("a"),o=t(this).find(".section_link").attr("href"),i=n.ctrl||n.command,a=i?"_blank":"_self",!r&&o&&window.open(o,a)})})})},881:function(e,t,n){var r,o;o=n(306),r=n(11),ds.define("share",function(e){var t,n,i,a,s,l,c,u,d,f,h,p,g,m,v;return p=e("_","$","ready"),n=p._,t=p.$,h=p.ready,a=i=void 0,m=n.template('<div style="display:none; overflow: visible;" class="share_dialog" title="<%= dialogTitle %>">\n    <div style="height: 65px;">\n        <div class="fb-like"\n            data-href="<%= url %>"\n            data-send="false"\n            data-layout="box_count"\n            data-width="450"\n            data-show-faces="false"\n            style="float: left; height: 61px; width: 47px; margin-right: 5px;"\n        >\n        </div>\n        <a class="twitter-share-button" href="https://twitter.com/share"\n            data-url="<%= url %>"\n            data-text="<%= text %>"\n            data-via="discogs"\n            data-size=""\n            data-related=""\n            data-count="vertical"\n            data-hashtags=""\n        >\n        </a>\n        <div class="clear"></div>\n    </div>\n</div>'),v=function(){return a||(a=new r(function(e){var t;return t=window.twttr||(window.twttr=function(e,t,n){var r,o,i;if(r=e.getElementsByTagName(t)[0],!e.getElementById(n))return o=e.createElement(t),o.id=n,o.async=!0,o.src="https://platform.twitter.com/widgets.js",r.parentNode.insertBefore(o,r),window.twttr||(i={_e:[],ready:function(e){i._e.push(e)}})}(document,"script","twitter-wjs")),t.ready(function(){e(t)})}))},l=function(){return i||(i=new r(function(e){return function(e,t,n){var r,o;r=e.getElementsByTagName(t)[0],e.getElementById(n)||(o=e.createElement(t),o.id=n,o.async=!0,o.src="//connect.facebook.net/en_US/all.js",r.parentNode.insertBefore(o,r))}(document,"script","facebook-jssdk"),window.fbAsyncInit=function(){window.FB.init({xfbml:!0}),window.FB.Event.subscribe("xfbml.render",function(){e(window.FB)})}}))},c=function(){return t("body").on("click",".share_link",g)},u=function(e){return t(m(e))},d=function(e,t){return e.XFBML.parse(t.get(0))},f=function(e,t){return t.html(""),e.widgets.createShareButton(location.href,t.get(0),t.data())},s=function(){return t(".share_dialog").each(function(){return t(this).dialog("close")}).remove()},g=function(e){var n,i,a,c,h;return e.preventDefault(),i=t(e.target).closest(".share_link"),h=v(),a=l(),c=r.all([h,a]),s(),n=u(i.data()),n.discogsDialog({width:150,modal:!1,position:{my:"right top+"+(t(this).outerHeight()+10),at:"right top",of:i.get(0)},dialogClass:"ui-dialog-arrow ui-dialog-arrow-top-right",open:function(){t("body").on("click.share_modal_close",function(e){if(!t(e.target).closest(".ui-dialog").length&&!i.length)return n.dialog("close")}),c.then(function(e){var t,r;return r=e[0],t=e[1],f(r,n.find(".twitter_share_button")),d(t,n.find("fb-like")),o.legacyTrack("Social","Share modal opened")})},close:function(){t("body").off("click.share_modal_close")}})},h(c)})},882:function(e,t,n){var r,o,i,a,s;n(373),r=n(2),s=ds.require("ready"),a=ds.require("onNextVisit"),o=function(){return a("google.legacyTrack","Shipping Labels","click","Clicked Buy Shipping Label Button")},i=function(){return r("body").on("click","#buy-shipping-label",o)},s(i)},883:function(e,t,n){"use strict";var r=n(2),o=n(7),i=n(5),a=n(25),s=a.getText;n(218);var l=ds.require("key");n(371);var c=ds.require("reactDialogs"),u=c.makeReactDialog,d=i.getUrl,f=500,h=/^http|\//,p=function(e){return e=d(e),function(){h.test(e)&&(window.location=e)}},g=function(e){return function(){var t=r(e);t.length>0&&t.get(0).click()}},m=function(e){e.preventDefault();var t=function(e){return u({content:e.html(),title:"Discogs Admin",width:872,height:362}).then(function(){r("#userLookup").focus()})};r("#dialog").lazy$element(d("/_d1m3n_/menu")).call().then(t)},v=void 0,y=function(e){l.setScope(e),v=void 0},b=function(e){return function(){if(!v)return v=l.getScope(),l.setScope(e),setTimeout(function(){return y(v)},f)}};l("g",b("navigate")),l("f",b("navigateForum")),l("a",b("action")),l("d","navigate",p("/my")),l("c","navigate",p("/mycollection")),l("w","navigate",p("/mywantlist")),l("s","navigate",p("/submissions")),l("p","navigate",p("/sell/purchases")),l("i","navigate",p("/sell/manage")),l("o","navigate",p("/sell/orders")),l("f","navigate",p("/forum/")),l("g","navigate",p("/groups/")),l("m","navigate",p("/messages/")),l("e","navigate",g("#edit_link")),l("u","navigate",g("#user_profile_link")),l("r","navigateForum",p("/forum/recent")),l("s","navigateForum",p("/forum/started")),l("p","navigateForum",p("/forum/posted")),l("w","navigateForum",p("/forum/watched")),l("v","navigateForum",p("/forum/saved")),l("c","action",g(".collections_buttons .add_to_collection")),l("w","action",g(".collections_buttons .toggle_wantlist")),l("i","action",g(".inv_add_button")),
l("l","action",g("#lists .add_to_list")),o.interactiveAdmin&&(l("d","navigateForum",p("/forum/deleted")),l("a","action",m));var w=void 0,_=function(){if("all"===l.getScope()){var e=w||(w=r("#keyboard_shortcuts_modal").lazy$element(d("/_keyboard_shortcuts_modal")).call());e.then(function(e){return u({title:s("Keyboard Shortcuts")(),content:e.html(),width:600,id:"keyboard_shortcuts_modal",dialogClass:"keyboard_shortcuts_modal_"+o.endpoint.split(".")[0]})})}};r(".show_keyboard_shortcuts").on("click",function(e){return _(),e.preventDefault()}),l("shift+/",_)},884:function(e,t){ds.define("sortableTable",function(e){var t,n,r,o,i,a,s,l,c,u,d,f,h,p;return c=e("$","_","ready"),t=c.$,n=c._,l=c.ready,s={},a=[],r=void 0,f=!1,s.init=function(){return a=t(".table-sort-row").toArray(),t("#table-sort-dropdown").on("change",i),t(".table-sort-control").onFastClick(o)},i=function(e){var n;return n=t(e.currentTarget).val().split(","),f="desc"===n[1],h(n[0])},o=function(e){var n;return e.preventDefault(),n=t(e.currentTarget).data("sort"),f=r===n&&!f,h(n,f)},h=function(e){return r=e,p(r,f),u(r,f),d(r,f)},p=function(e,r){return a=n.sortBy(a,function(n){return t(n).data(e)}),r&&a.reverse(),t(".table-sort").prepend(a)},u=function(e,r){var o,i,a;return t(".table-sort-icon").remove(),i=r?"chevron-down":"chevron-up",a="<i class='icon icon-"+i+" table-sort-icon'></i>",o=n.filter(t(".table-sort-control"),function(n){if(t(n).data("sort")===e)return n}),t(o).append(a)},d=function(e,r){var o,i,a;return a=r?"desc":"asc",i=e+","+a,o=n.filter(t("#table-sort-dropdown option"),function(e){if(t(e).val()===i)return t(e).prop("selected",!0)})},l(function(){return s.init()}),s})},885:function(e,t,n){var r;r=n(9),ds.define("tables",function(e){var t,n,o,i,a,s,l,c,u,d,f;return u=e("$","_","ready","key"),t=u.$,i=u._,c=u.ready,s=u.key,o="tables:checkbox:checked",l=void 0,n=void 0,a=function(e){return e.filter(":checked").length},d=function(e,t){var n;return n=a(t)===t.length,e.prop("checked",n)},f=function(e){var n,i,s;n=t(".reactive_control"),n.length>0&&(i=function(){return 0===a(e)},s=function(){return n.attr("disabled",i())},s(),e.on("change",s),r.on(o,s))},c(function(){var e;return t(".table_block").on("click","input[type=checkbox]",function(e){var i,a,c,u,d;if(i=t(".table_block input[type=checkbox]"),l&&s.shift&&(u=i.index(l),d=i.index(this),a=u<d?n.slice(u-1,d):n.slice(d-1,u),c=t(this).prop("checked"),a.each(function(e,n){return t(n).prop("checked",c).parents("tr").toggleClass("selected",c)})),l=this,!t(e.target).hasClass("check_all"))return r.trigger(o,{checkbox:e.target})}),e=t("input.check_all").each(function(){var e,n,a,s;return e=t(this),s=e.data("checkAllSelector"),n=t(s),a=function(){return n.prop("checked",e.prop("checked")),r.trigger(o,{$checkboxes:n})},e.on("click",a),r.on(o,i.partial(d,e,n)),d(e,n)}),n=t(e.data("checkAllSelector")),f(n),t(".table_toggle").onFastClick(function(){var e;return e=t(this).closest("tr"),e.toggleClass("table_open")})})})},886:function(e,t,n){var r,o,i,a,s;r=n(2),o=n(12),i=n(298),a=n(13),s=n(5),n(887),ds.define("thread",function(e){var t,n,l,c,u,d;return l={},l.init=function(){return u(),r(document).on("pjax:end",u),i.setupActionMenuView(r("#pjax_container"))},u=function(){var e;e=r(".quote_user"),r("body").on("click",".guideline-tracker",d),o.isMobile?e.onFastClick(c):e.on("mousedown",c)},d=function(){var t;return t="forum-"+r(this).data("location"),e("onNextVisit")("google.legacyTrack","discussion","guidelines",t)},c=function(){var e,o,i,a,l;return e=r("#text"),l=r(this).data("mess-username"),o=r(this).parents(".thread_message").attr("id"),a=t(o),i="[quote="+l+"]"+r.trim(a)+"[/quote]\n\n",n(e,i.toString()),e.focus(),s.scrollTo(e),!1},t=function(e){var t,n,o,i,a;return a=window.getSelection||document.getSelection,a?(t=a(),n=t.anchorNode):document.selection&&(t=document.selection.createRange(),n=t.parentElement(),t=t.text),o=r(n).parents(".thread_message").attr("id"),i=o===e?t:r("#"+e+" .width_limit").text()},n=function(e,t){var n,r,o;document.selection?(e.focus(),r=document.selection.createRange(),r.text=t):e.selectionStart||"0"===e.selectionStart||0===e.selectionStart?(o=e.selectionStart,n=e.selectionEnd,e.val([e.value.substring(0,o),t,e.value.substring(n,e.value.length)].join(""))):e.val(e.val()+t)},a(function(){return l.init()}),l})},887:function(e,t,n){var r,o,i,a,s,l,c,u,d,f,h,p,g;r=n(2),o=n(3),f=n(13),n(369),p=ds.require("storage"),g="dsAutosaveData",d={data:p.get(g)||{}},c=[],d.init=function(){return d.$fields=r(".autosave"),a(),o.each(d.$fields,l),r(window).on("unload.dsAutosave",d.saveAll),r(".autosave-clear").on("click",s)},l=function(e){var t,n,o,i;if(t=r(e),n=t.data("autosave-key"),i=null!=(o=d.data[n])?o.value:void 0,c.push(n),null!=i?i.length:void 0)return t.val(i)},u=function(){if(p.enabled)return p.set(g,d.data)},d.saveAll=function(){return o.each(c,h),u()},h=function(e){var t,n;return t=d.$fields.filter("[data-autosave-key='"+e+"']"),n=t.val(),d.data[e]={timestamp:Date.now(),value:n}},d.clearAll=function(){return o.each(c,i),u()},i=function(e){return d.data=o.omit(d.data,e)},a=function(){var e,t;return t=864e5,e=Date.now(),d.data=o.omit(d.data,function(n){var r,o,i;return o=n.timestamp+t<e,r=!(null!=(i=n.value)?i.length:void 0),o||r}),u()},s=function(){return r(window).off("unload.dsAutosave"),d.clearAll()},f(d.init),e.exports=d},888:function(e,t,n){var r,o,i,a,s;r=n(2),o=n(3),s=n(305),a=n(306),i=n(12),ds.define("toggleSection",function(e){var t,n,l,c,u,d,f,h;return c=e("persist"),n=e("layout"),u={},f=["expanded","collapsed"],t={control:"toggle_section_control",collapsed:"toggle_section_collapsed",remember:"toggle_section_remember"},h=function(e){var n,o,i;return o=r(e.target),!o.hasClass(t.control)&&!o.is("i")||(n=r(r(this).data("for")),i=n.hasClass(t.collapsed),d(n,!i),void a.legacyTrack("toggle_section",i?"opened":"closed",n.data("toggle-section-id")))},d=function(e,n){var o,i;o=l(e),i=f[1*n],e.toggleClass(t.collapsed),e.hasClass(t.remember)&&c.set(o,n),r(window).trigger(o+":"+i)},l=function(e){return"toggle_section_"+e.data("toggle-section-id")},u.init=function(){var e;return e=r("."+t.control),i.isMobile&&s.then(function(){var t;t="mobile"===n.mode(),t&&e.each(function(){var e,t,n;e=r(r(this).data("for")),t=l(e),n=c.get(t),o.isUndefined(n)&&d(e,!0)})}),e.onFastClick(h)},r(function(){return u.init()}),u})},889:function(e,t,n){var r,o;r=n(2),o=n(25),ds.define("toggledots",function(){var e;return e={init:function(){return r("body").on("click",".toggledots",this.handleClick)},handleClick:function(e){var t;return t=r(this),r(t.data("toggledotsSelector")).toggle(),t.data("toggledotsToggled")?(t.data("toggledotsToggled",!1),t.attr("title",o.getText("Show more")())):(t.data("toggledotsToggled",!0),t.attr("title",o.getText("Show less")())),e.preventDefault()}},r(function(){return e.init()}),e})},890:function(e,t,n){var r,o,i;r=n(2),o=n(306),i=n(25),n(13),ds.define("tracklist",function(e){var t,n,a;return t=e("persist"),a=e("ready"),n={},n.init=function(){if(this.$tracklistCredits=r(".toggle_tracklist_credits"),this.$trackBlockquote=r(".track blockquote"),this.$tracklistCredits.length>0)return this.$tracklistCredits.click(this.toggleTracklistCredits)},n.toggleTracklistCredits=function(){var e,a,s;e=r(this),a=n,s=parseInt(t.get("hide_tracklist_credits"),10)?0:1,a.$trackBlockquote.slideToggle("fast"),t.set("hide_tracklist_credits",s),o.legacyTrack("release",s?"hide_credits":"show_credits"),e.html(s?i.getText("Show Credits")():i.getText("Hide Credits")())},a(function(){return n.init()}),n})},891:function(e,t,n){var r,o,i,a,s,l,c;r=n(2),i=n(3),o=n(11),a=n(7),c=n(5),s=n(25).getText,l=n(306),n(304),n(366),n(13),n(10),ds.define("youtubeVideoPlayer",function(e){var t,n,u,d,f,h,p,g,m,v,y,b,w,_,k,x,T;return g=e("layout"),T=e("youtubeIframeAPI"),w=e("ready"),t=e("Backbone"),b={},v=121,k=a["videos/macro:playlist"].slice(0,+v+1||9e9),y=3,m=3,u=!1,_=1e4,x=s("Some mobile devices will not allow playback until you first activate the YouTube player by tapping on it. If the video is not loading, refresh the page, then tap on the player."),d=void 0,p=function(){return r("html").hasClass("needs_reduced_ui")&&"mobile"===g.mode()},f=function(e){var t,n;return e=Number(e),t=Math.floor(e/60),n=String(((e-60*t)/100).toFixed(2)).slice(2,4)||"00",t+":"+n},b.formatDuration=f,h=function(){var e,t;return e=r("#youtube_player_placeholder"),this.$player=e,t=new o(function(t){if(1===e.length&&k.length>0)return e.parents(".video.toggle_section").hasClass("toggle_section_collapsed")?r(window).on("toggle_section_video:expanded.video_section",function(){r(window).off("toggle_section_video:expanded.video_section"),t(b)}):t(b)}),t.then(n)},b.init=h,w(function(){return b.init()}),n=function(){var e,n,s,h,g,v,w,C,S,A,E,I,M;b.current=k[0],A=void 0,S=new o(function(e){return A=e}),n=t.Model.extend({initialize:function(){return this.set("duration",f(this.get("duration"))),b.$player.on(this.id+":changed",i.bind(this.control,this))},defaults:{playing:!1},play:function(){var e,t;return e=this.get("id"),t=i.indexOf(i.pluck(k,"id"),e),e!==b.current.id?(S.then(function(e){return e.playVideoAt(t)}),b.current=e):S.then(function(e){return e.playVideo()}),this.set("playing",!0),this},pause:function(){return S.then(function(e){return e.pauseVideo()}),this.set("playing",!1),this},togglePlay:function(){return this.get("playing")?this.pause():this.play()},control:function(e,t){return this.set("playing",t===YT.PlayerState.PLAYING),this}}),e=t.Collection.extend({model:n}),M=b.tracks=new e,w=function(e){return function(){var t,n;return n=e*b.$tracklist.height(),t=this.$el.position().top-b.$tracklist.position().top,n>=t&&t>=0}},s=t.View.extend({initialize:function(){var e;e=this.model.get("id"),this.hasContent=!1,this.render(),this.$el.data("id",e),this.model.on("change",this.render,this),this.model.on("nodata",this.destroy,this),this.$el.onFastClick(i.bind(this.togglePlay,this))},tagName:"div",className:"youtube_track",template:i.template("<img src='<%= thumbnail %>' /> <i class='icon icon-play'></i> <i class='icon icon-pause'></i> <strong><%= title %></strong> <br /> <span class='youtube_track_duration'><%= duration %></span>"),destroy:function(){this.remove(),b.trackViews.splice(i(b.trackViews).indexOf(this),1)},renderContent:function(){var e;return e=this.$el,e.html(this.template(this.model.toJSON())),this.hasContent=!0,this.model.trigger("content:rendered"),this},render:function(){var e,t,n;return t=this.model.get("playing"),this.$el.toggleClass("youtube_track_paused",!t).toggleClass("youtube_track_playing",t),e=1===this.$el.closest("body").length,e&&(n=b.$tracklist.scrollTop()+(this.$el.position().top-b.$tracklist.position().top)-b.$tracklist.height()/2+this.$el.height()/2,t&&b.$tracklist.stop().animate({scrollTop:n},200)),this.hasContent||this.$el.append("<div class='youtube_track_placeholder' />"),!this.hasContent&&e&&this.visible()&&this.renderContent(),this},visible:w(1),nearViewport:w(3),togglePlay:function(){var e;this.model.togglePlay(),e=this.model.get("playing"),!e||u||d||(d=i.delay(function(){if(!u)return c.confirm(x()).then(function(){return p()&&(location.hash="video"),location.reload()})},_))}}),C=function(e){var t,n,r;u||(u=e.data===YT.PlayerState.PLAYING),r="function"==typeof(t=b.player).getVideoData?t.getVideoData().video_id:void 0,r&&(n=M.find(function(e){return e.get("id")!==r&&e.get("playing")}),n&&n.set("playing",!1),b.$player.trigger(r+":changed",[e.data]),I(e))},I=function(e){var t,n,r;n=a.pageObject.objectType,r=T.getPlayerState(e),t="video"+r,"playing"===r&&l.legacyTrack(n,t)},g=function(){var e;return this.player||(e=new YT.Player("youtube_player_placeholder",{host:"http://www.youtube-nocookie.com",height:"100%",width:"100%",playerVars:{playlist:i.pluck(k,"id").join(","),loop:!0},events:{onReady:function(e){A(e.target)},onStateChange:C}}),S.then(function(e){return e.cuePlaylist(i.pluck(k,"id"))}),this.player=e),this.player},v=function(){var e;return b.$tracklist||(b.$tracklist=e=r("<div id='youtube_tracklist' />"),b.trackViews=M.map(function(t){var n;return n=new s({model:t}),e.append(n.$el),n}),r("#youtube_player_wrapper").after(e),E("nearViewport"),e.on("scroll.lazyloading_video_tracks",i.throttle(i.partial(E,"nearViewport"),75,{leading:!1})),M.on("change:playing",function(e,t){if(t&&p())return c.scrollTo("video")}),M.on("content:rendered",function(){if(i.every(b.trackViews,function(e){return e.hasContent}))return e.off("scroll.lazyloading_video_tracks")})),b.$tracklist},E=function(e){return i(h(e)).invoke("renderContent")},h=function(e){var t,n,r,o;for(r=y*m,o=[],n=b.trackViews.length,t=0;t<n&&o.length<r;)b.trackViews[t][e]()&&o.push(b.trackViews[t]),t+=1;return o},M.reset(k),T.load().then(i(g).bind(b)).then(i(v).bind(b))},b})},892:function(e,t,n){var r;r=n(306),ds.define("youtubemodal",function(e){var t,n,o,i;return t=e("$"),i=e("ready"),n=e("reactDialogs").makeReactDialog,o={},o.init=function(){return t("body").on("click",".youtube_modal_trigger",this.show),this.contentClass="youtube_modal_content",this.template="<div class='"+this.contentClass+"'><iframe type='text/html' src='https://www.youtube-nocookie.com/embed/{{ youtubeID }}' frameborder='0' width='853' height='505'></iframe></div>"},o.show=function(e){var i,a,s;i=t(this),s=i.data("youtube-id"),a=o.template,a=a.replace("{{ youtubeID }}",s),n({content:a,width:850,height:500,title:i.data("title")}),r.legacyTrack(i.data("ga"),"quicklist_manual"),e.preventDefault()},i(function(){return o.init()}),o})},893:function(e,t,n){var r,o,i;n(13),n(373),r=n(2),i=ds.require("ready"),o={},o.onNextVisit=ds.require("onNextVisit"),o.LINK_ATTRIBUTION_MAP={"collection-tab-link":["Link Attribution","Clicked 'Collection' in user tabs"],"collection-user-link":["Link Attribution","Clicked 'Collection' in user menu"],"collection-marketplace-link":["Link Attribution","Clicked 'Items I Have' in MP header"]},o.check=function(e){var t,n,r,i,a,s,l,c,u;if(a=e.currentTarget.className.split(" "),a.length>0)for(s=0,c=a.length;s<c;s++)if(i=a[s],n=i.length>0&&o.LINK_ATTRIBUTION_MAP[i]){r=n[0],t=n[1],l=n[2],u=n[3],o.onNextVisit("google.legacyTrack",r,t,l,u,!0);break}},i(function(){return r(document.body).on("click","a",o.check)}),e.exports=o},894:function(e,t,n){var r,o,i,a,s,l;r=n(2),o=n(3),a=n(25),l=ds.require("layout"),s=n(338),i={modal:!0,draggable:!1,resizable:!1,width:400},r.fn.discogsDialog=function(e){var t,n,a,c,u,d,f;return f=function(){r(".ui-dialog-titlebar-close",t.dialog("widget")).html("<i class='icon icon-times'></i>").blur()},a=function(){t.dialog("close")},d=function(t){f(),e.modal&&r("body").on("click.discogs_dialog",".ui-widget-overlay",a),o.isFunction(t)&&t()},c=function(t){e.modal&&r("body").off("click.discogs_dialog",".ui-widget-overlay",a),o.isFunction(t)&&t()},n=o.clone(i),u=s(),t=r(this),l.ready.then(function(){var i;return"mobile"===l.mode()&&(n.width=r(window).width()),e=o.extend(n,e||{}),i=t.data("title"),i&&!e.title&&(e.title=i),e.open=o.isFunction(e.open)?o.partial(d,e.open):d,e.close=o.isFunction(e.close)?o.partial(e.close,c):c,u.then(function(){return t.dialog(e)})})},r.fn.saveDialog=function(e){var t,n,o;return t=r(this),o=e.saveClickHandler,delete e.saveClickHandler,n=function(){t.dialog("close")},e.buttons=[{text:a.getText("Save")(),class:"button button-green",click:o},{text:a.getText("Cancel")(),class:"button",click:n}],t.discogsDialog(e)},r.fn.discogsDialog}});
//# sourceMappingURL=discogs.js.map